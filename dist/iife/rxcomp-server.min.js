/**
 * @license rxcomp-server v1.0.0-beta.12
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
this.rxcomp=this.rxcomp||{},this.rxcomp.server=function(e,t,n,r,o){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,n){return(h=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var N;(N=e.CacheControlType||(e.CacheControlType={})).Public="public",N.Private="private",N.NoCache="no-cache",N.NoStore="no-store";var v,m,g=function(){function t(t){this.maxAge=0,this.cacheControl=e.CacheControlType.Public,t&&Object.assign(this,t)}return t.prototype.set=function(e){return e&&Object.assign(this,e),this.date=new Date,this},s(t,[{key:"expired",get:function(){return this.cacheControl===e.CacheControlType.NoStore||0===this.maxAge||this.date.getTime()+1e3*this.maxAge<Date.now()}}]),t}(),T=function(){function e(){}return e.delete=function(e,t){void 0===e&&(e="cache");var n=e+"_"+t;this.cache_.has(n)&&this.cache_.delete(n)},e.has=function(e,t){void 0===e&&(e="cache");var n=e+"_"+t;return this.cache_.has(n)},e.get=function(e,t){void 0===e&&(e="cache");var n=null,r=e+"_"+t;if(this.cache_.has(r)){var o=this.cache_.get(r);o&&(o.expired?this.cache_.delete(r):n=JSON.parse(o.value))}return n},e.set=function(e,t,n,r){void 0===e&&(e="cache"),void 0===r&&(r=0);var o=e+"_"+t,i=(new g).set({value:JSON.stringify(n,null,0),maxAge:r});return this.cache_.set(o,i),n},e}();function E(t){return t.nodeType===e.RxNodeType.ELEMENT_NODE}function O(t){return t.nodeType===e.RxNodeType.TEXT_NODE}function b(t){return t.nodeType===e.RxNodeType.COMMENT_NODE}function x(t){return t.nodeType===e.RxNodeType.DOCUMENT_NODE}function _(t){return t.nodeType===e.RxNodeType.DOCUMENT_TYPE_NODE}function w(e){var n,r=new G,o=r,i=new t.Parser({onopentag:function(e,t){n=new z(o,e,t),o.childNodes.push(n),o=n},onclosetag:function(e){o.parentNode&&(o=o.parentNode)},ontext:function(e){var t=new I(o,e);o.childNodes.push(t)},onprocessinginstruction:function(e,t){n="!doctype"===e?new U(o,t):new L(o,t),o.childNodes.push(n)},oncomment:function(e){n=new V(o,e),o.childNodes.push(n)},oncommentend:function(){},oncdatastart:function(){console.log("oncdatastart")},oncdataend:function(){console.log("oncdataend")},onerror:function(e){console.log("error",e)}},{decodeEntities:!1,lowerCaseTags:!0});return i.write(e),i.end(),r}function S(t){var n=[];return t.trim().split(" ").forEach((function(t){t.trim().split(">").forEach((function(t,r){for(var o,i=[],s=y(t.matchAll(/\:not\(\#([^\.[#:]+)\)|\:not\(\.([^\.[#:]+)\)|\:not\(\[([^\.\[#:]+)\]\)|\:not\(([^\.\[#:\]]+)\)|\#([^\.[#:]+)|\.([^\.[#:]+)|\[([^\.\[#:]+)\]|([^\.\[#:\]]+)/g));!(o=s()).done;){var u=o.value;u[1]?i.push({selector:u[1],type:e.SelectorType.Id,negate:!0}):u[2]?i.push({selector:u[2],type:e.SelectorType.Class,negate:!0}):u[3]?i.push({selector:u[3],type:e.SelectorType.Attribute,negate:!0}):u[4]?i.push({selector:u[4],type:e.SelectorType.TagName,negate:!0}):u[5]?i.push({selector:u[5],type:e.SelectorType.Id,negate:!1}):u[6]?i.push({selector:u[6],type:e.SelectorType.Class,negate:!1}):u[7]?i.push({selector:u[7],type:e.SelectorType.Attribute,negate:!1}):u[8]&&i.push({selector:u[8],type:e.SelectorType.TagName,negate:!1})}var c=r>0?{selector:t,selectors:i,inner:!0}:{selector:t,selectors:i,inner:!1};n.push.call(n,c)}))})),n}function C(t,n){switch(n.type){case e.SelectorType.Id:return(""!==n.selector&&t.attributes.id===n.selector)!==n.negate;case e.SelectorType.Class:return-1!==t.classList.indexOf(n.selector)!==n.negate;case e.SelectorType.Attribute:return-1!==Object.keys(t.attributes).indexOf(n.selector)!==n.negate;case e.SelectorType.TagName:return t.nodeName===n.selector!==n.negate;default:return!1}}function D(e,t){return t.reduce((function(t,n){return t&&C(e,n)}),!0)}function R(e,t,n){void 0===n&&(n=null);var r=null;if(n||e.length){n=n||e.shift();for(var o,i=y(t);!(o=i()).done;){var s=o.value;if(s instanceof z){if(D(s,n.selectors))return e.length?R(e,s.childNodes):s;n.inner||(r=R(e,s.childNodes,n))}}}return r}function M(t,n,r){var o;if(void 0===n&&(n=!1),void 0===r&&(r=null),E(t)){var i=new z(r,t.nodeName,Object.assign({},t.attributes));n&&(i.childNodes=t.childNodes.map((function(e){return M.apply(e,[e,n,i])}))),o=i}else if(t.nodeType===e.RxNodeType.DOCUMENT_FRAGMENT_NODE){var s=new F;n&&(s.childNodes=t.childNodes.map((function(e){return M.apply(e,[e,n,s])}))),o=s}else if(O(t))o=new I(r,t.nodeValue);else if(b(t))o=new V(r,t.nodeValue);else{if(!x(t))throw new Error("Invalid node type");var u=new G;n&&(u.childNodes=t.childNodes.map((function(e){return M.apply(e,[e,n,u])}))),o=u}return o}T.cache_=new Map,(v=e.RxNodeType||(e.RxNodeType={}))[v.ELEMENT_NODE=1]="ELEMENT_NODE",v[v.TEXT_NODE=3]="TEXT_NODE",v[v.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",v[v.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",v[v.COMMENT_NODE=8]="COMMENT_NODE",v[v.DOCUMENT_NODE=9]="DOCUMENT_NODE",v[v.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",v[v.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",(m=e.SelectorType||(e.SelectorType={}))[m.None=-1]="None",m[m.Id=0]="Id",m[m.Class=1]="Class",m[m.Attribute=2]="Attribute",m[m.TagName=3]="TagName";var A=function(){function e(e){void 0===e&&(e=null),this.nodeValue=null,this.parentNode=e,this.nodeType=-1}var t=e.prototype;return t.cloneNode=function(e){return void 0===e&&(e=!1),M.apply(this,[this,e])},t.serialize=function(){return""},e}(),k=function(){var e=t.prototype;function t(e){Object.defineProperty(this,"node",{value:e,writable:!1,enumerable:!1}),this.init()}return e.item=function(e){var t=Object.keys(this);return t.length>e?t[e]:void 0},e.getPropertyPriority=function(e){var t=this[e];return t&&t.indexOf("!important")?"important":""},e.getPropertyValue=function(e){return this[e]},e.setProperty=function(e,t,n){this[e]=t+("important"===n?"!important":""),this.serialize_()},e.removeProperty=function(e){delete this[e],this.serialize_()},e.serialize_=function(){var e=this;this.node.attributes.style=Object.keys(this).map((function(t){return t+": "+e[t]+";"})).join(" ")},e.init=function(){var e,t=this;if(Object.keys(this).forEach((function(e){return delete t[e]})),null==(e=this.node.attributes)?void 0:e.style){[].concat(this.node.attributes.style.matchAll(/([^:]+):([^;]+);?\s*/gm)).forEach((function(e){var n=e[1],r=e[2];t[n]=r}))}},t}(),j=function(e){function t(t){var n;return(n=e.call(this)||this).node=t,n.init(),n}u(t,e);var n=t.prototype;return n.item=function(e){return this[e]},n.contains=function(e){return-1!==this.indexOf(e)},n.add=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){-1!==e.indexOf(t)&&e.push(t)})),this.serialize_()},n.remove=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})),this.serialize_()},n.toggle=function(e,t){var n=this.indexOf(e);return!1===t?(this.splice(n,1),this.serialize_(),!1):!0===t?(this.push(e),this.serialize_(),!0):-1!==n?(this.splice(n,1),this.serialize_(),!1):(this.push(e),this.serialize_(),!0)},n.replace=function(e,t){var n=this.indexOf(e);-1!==n&&this.splice(n,1),this.push(t),this.serialize_()},n.serialize_=function(){this.node.attributes.class=this.join(" ")},n.init=function(){var e;this.length=0,(null==(e=this.node.attributes)?void 0:e.class)&&Array.prototype.push.apply(this,this.node.attributes.class.split(" ").map((function(e){return e.trim()})))},t}(d(Array)),z=function(t){function n(n,r,o){var i;return void 0===n&&(n=null),void 0===o&&(o=null),(i=t.call(this,n)||this).attributes={},i.nodeType=e.RxNodeType.ELEMENT_NODE,i.nodeName=r,o&&"object"==typeof o&&(i.attributes=o),i.style=new k(f(i)),i.classList=new j(f(i)),i.childNodes=[],i}u(n,t);var r=n.prototype;return r.append=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n=n.map((function(t){var n;return"string"==typeof t?n=new I(e,t):(n=t).parentNode=e,n})),Array.prototype.push.apply(this.childNodes,n)},r.prepend=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n=n.map((function(t){var n;return"string"==typeof t?n=new I(e,t):(n=t).parentNode=e,n})),Array.prototype.unshift.apply(this.childNodes,n)},r.replaceChildren=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.map((function(t){var n;return"string"==typeof t?n=new I(e,t):(n=t).parentNode=e,n}));this.childNodes=o},r.querySelectorAll=function(e){var t=S(e),n=this.childNodes.filter((function(e){return!0}));return console.log(t),n.length?n:null},r.querySelector=function(e){return R(S(e),this.childNodes)},r.hasAttribute=function(e){return-1!==Object.keys(this.attributes).indexOf(e.toLowerCase())},r.getAttribute=function(e){return this.attributes[e.toLowerCase()]||null},r.setAttribute=function(e,t){this.attributes[e.toLowerCase()]=t.toString(),"style"===e?this.style.init():"class"===e&&this.classList.init()},r.removeAttribute=function(e){delete this.attributes[e],"style"===e?this.style.init():"class"===e&&this.classList.init()},r.replaceChild=function(e,t){var n=this.childNodes.indexOf(t);return-1!==n&&(this.childNodes[n]=e,e.parentNode=this),t},r.removeChild=function(e){if(!(e instanceof A))throw new Error("Uncaught TypeError: Failed to execute 'removeChild' on 'Node': parameter 1 is not of type 'Node'.");var t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Uncaught NotFoundError: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.");return this.childNodes.splice(t,1),e},r.insertBefore=function(e,t){void 0===t&&(t=null);var n=t?this.childNodes.indexOf(t):this.childNodes.length;return-1!==n&&(this.childNodes.splice(n,0,e),e.parentNode=this),e},r.cloneNode=function(e){return void 0===e&&(e=!1),M.apply(this,[this,e])},r.addListener=function(e,t){},r.removeListener=function(e,t){},r.serialize=function(){return"<"+this.nodeName+this.serializeAttributes()+">"+this.childNodes.map((function(e){return e.serialize()})).join("")+"</"+this.nodeName+">"},r.serializeAttributes=function(){var e=this,t="",n=Object.keys(this.attributes);return n.length&&(t=" "+n.map((function(t){return t+'="'+e.attributes[t]+'"'})).join(" ")),t},s(n,[{key:"children",get:function(){var t,n=[],r=0,o=this.childNodes;for(t=o[r++];t;)(t=o[r++]).nodeType===e.RxNodeType.ELEMENT_NODE&&n.push(t);return n}},{key:"childElementCount",get:function(){var t,n=0,r=0,o=this.childNodes;for(t=o[n++];t;)t.nodeType===e.RxNodeType.ELEMENT_NODE&&r++,t=o[n++];return r}},{key:"firstChild",get:function(){var e=null;return this.childNodes.length&&(e=this.childNodes[0]),e}},{key:"firstElementChild",get:function(){for(var e,t=y(this.childNodes);!(e=t()).done;){var n=e.value;if(E(n))return n}return null}},{key:"lastChild",get:function(){var e=null;return this.childNodes.length&&(e=this.childNodes[this.childNodes.length-1]),e}},{key:"lastElementChild",get:function(){for(var e=this.childNodes,t=e.length-1;t>-1;t--){var n=e[t];if(E(n))return n}return null}},{key:"previousSibling",get:function(){var e=null;if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);t>0&&(e=this.parentNode.childNodes[t-1])}return e}},{key:"nextSibling",get:function(){var e=null;if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);-1!==t&&t<this.parentNode.childNodes.length-1&&(e=this.parentNode.childNodes[t])}return e}},{key:"wholeText",get:function(){if(this.nodeType===e.RxNodeType.TEXT_NODE)return this.nodeValue}},{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"innerText",set:function(e){this.childNodes=[new I(this,e)]},get:function(){return this.childNodes.filter((function(e){return O(e)||E(e)})).map((function(e){return e.innerText})).join("")}},{key:"textContent",set:function(e){this.innerText=String(e)},get:function(){return this.innerText}},{key:"innerHTML",get:function(){return this.childNodes.map((function(e){return e.serialize()})).join("")},set:function(e){var t=this,n=w(e).childNodes.map((function(e){return e.parentNode=t,e}));this.childNodes=n}}]),n}(A),I=function(t){function n(n,r){var o;return void 0===n&&(n=null),(o=t.call(this,n)||this).nodeType=e.RxNodeType.TEXT_NODE,o.nodeValue=String(r),o}return u(n,t),n.prototype.serialize=function(){return this.nodeValue},s(n,[{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}},{key:"textContent",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}}]),n}(A),P=function(t){function n(n,r){var o;return void 0===n&&(n=null),(o=t.call(this,n)||this).nodeType=e.RxNodeType.CDATA_SECTION_NODE,o.nodeValue=String(r),o}return u(n,t),n.prototype.serialize=function(){return this.nodeValue},s(n,[{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}},{key:"textContent",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}}]),n}(A),V=function(t){function n(n,r){var o;return void 0===n&&(n=null),(o=t.call(this,n)||this).nodeType=e.RxNodeType.COMMENT_NODE,o.nodeValue=String(r),o}return u(n,t),n.prototype.serialize=function(){return"\x3c!--"+this.nodeValue+"--\x3e"},s(n,[{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}},{key:"textContent",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}}]),n}(A),L=function(t){function n(n,r){var o;return void 0===n&&(n=null),(o=t.call(this,n)||this).nodeType=e.RxNodeType.PROCESSING_INSTRUCTION_NODE,o.nodeValue=String(r),o}return u(n,t),n.prototype.serialize=function(){return"<"+this.nodeValue+">"},n}(A),U=function(t){function n(n,r){var o;return void 0===n&&(n=null),(o=t.call(this,n)||this).nodeType=e.RxNodeType.DOCUMENT_TYPE_NODE,o.nodeValue=String(r),o}return u(n,t),n.prototype.serialize=function(){return"<"+this.nodeValue+">"},n}(A),F=function(t){function n(){var n;return(n=t.call(this,null,"#document-fragment")||this).nodeType=e.RxNodeType.DOCUMENT_FRAGMENT_NODE,n.childNodes=[],n}return u(n,t),n}(z),G=function(t){function n(){var n;return(n=t.call(this,null,"#document")||this).nodeType=e.RxNodeType.DOCUMENT_NODE,n.childNodes=[],n}u(n,t),s(n,[{key:"hidden",get:function(){return!0}},{key:"visibilityState",get:function(){return"prerender"}},{key:"doctype",get:function(){return this.childNodes.find((function(e){return _(e)}))}},{key:"body",get:function(){return this.childNodes.find((function(e){return E(e)&&"body"===e.nodeName}))}},{key:"head",get:function(){return this.childNodes.find((function(e){return E(e)&&"head"===e.nodeName}))}},{key:"title",get:function(){var e=this.childNodes.find((function(e){return E(e)&&"title"===e.nodeName}));return e?e.innerText:null},set:function(e){var t=this.childNodes.find((function(e){return E(e)&&"title"===e.nodeName}));t&&(t.innerText=e)}},{key:"documentElement",get:function(){return this.firstElementChild}}]);var r=n.prototype;return r.createAttribute=function(){},r.createAttributeNS=function(){},r.createCDATASection=function(){},r.createComment=function(e){return new V(null,e)},r.createDocumentFragment=function(){return new F},r.createElement=function(e){return new z(null,e)},r.createElementNS=function(e){return new z(null,e)},r.createEvent=function(){},r.createNodeIterator=function(){},r.createProcessingInstruction=function(e){return new L(null,e)},r.createRange=function(){},r.createTextNode=function(e){return new I(null,e)},r.createTouchList=function(){},r.createTreeWalker=function(){},r.serialize=function(){return""+this.childNodes.map((function(e){return e.serialize()})).join("")},n}(z),H={name:"rxcomp-server",static:!1,development:!1,production:!0,host:"",resource:"/",api:"/api"},$=require("fs"),q=function(e){e&&Object.assign(this,e)},X=function(e){e&&Object.assign(this,e)},Y=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t.bootstrap=function(e,t){if(!n.isPlatformServer)throw new n.ModuleError("missing platform server, node process not found");if(!e)throw new n.ModuleError("missing moduleFactory");if(!e.meta)throw new n.ModuleError("missing moduleFactory meta");if(!e.meta.bootstrap)throw new n.ModuleError("missing bootstrap");if(!e.meta.bootstrap.meta)throw new n.ModuleError("missing bootstrap meta");if(!e.meta.bootstrap.meta.selector)throw new n.ModuleError("missing bootstrap meta selector");if(!t)throw new n.ModuleError("missing template");var r=this.resolveGlobals(t),o=this.resolveMeta(e);if(o.node instanceof z){var i,s=o.node,u=o.nodeInnerHTML,c={selector:e.meta.bootstrap.meta.selector,innerHTML:u},a=new z(null,"script"),l=new I(null,"var rxcomp_hydrate_ = "+JSON.stringify(c)+";");a.append(l),null==(i=s.parentNode)||i.insertBefore(a,s)}var h=new e;h.meta=o,o.imports.forEach((function(e){e.prototype.constructor.call(h)}));var d=h.compile(o.node,{document:r});return h.instances=d,d[0].pushChanges(),h},t.serialize=function(){if(console.log("Server.serialize"),this.document instanceof G)return this.document.serialize();throw new n.ModuleError("document is not an instance of RxDocument")},t.resolveGlobals=function(e){var t="string"==typeof e?w(e):e;return this.document=t,global.document=this.document,this.document},t}(n.Platform);function J(e,t){return t&&t.host&&(H.host=t.host),r.from(new Promise((function(n,r){if(!(null==t?void 0:t.template))return r(new Error("ServerError: missing template"));try{Y.bootstrap(e,t.template);n(new q(Object.assign({serialize:function(){return Y.serialize()}},t)))}catch(e){r(new X(Object.assign({error:e},t)))}})))}function B(e,t){return r.Observable.create((function(n){var r=T.get("cached",e.url);if(console.log("cached",!!r),r)return n.next(r),n.complete();Q(e).pipe(o.switchMap((function(n){return e.template=n,t(e)}))).subscribe((function(t){T.set("cached",e.url,t,3600),n.next(t),n.complete()}),(function(e){n.error(e)}))}))}function Q(e){return r.Observable.create((function(t){var n=T.get("template",e.template);console.log("template",!!n),n&&(t.next(n),t.complete()),$.readFile(e.template,e.charset,(function(n,r){n?t.error(n):(T.set("template",e.template,r),t.next(r),t.complete())}))}))}Y.bootstrap$=J,Y.render$=B,Y.template$=Q;var W=[],K=[],Z=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t}(n.Module);return Z.meta={declarations:[].concat(W,K),exports:[].concat(W,K)},e.CacheItem=g,e.CacheService=T,e.RxCData=P,e.RxComment=V,e.RxDocument=G,e.RxDocumentType=U,e.RxElement=z,e.RxNode=A,e.RxProcessingInstruction=L,e.RxQuery=function(e){this.selector="",this.selectors=[],this.inner=!1,e&&Object.assign(this,e)},e.RxSelector=function(t){this.selector="",this.type=e.SelectorType.None,this.negate=!1,t&&Object.assign(this,t)},e.RxText=I,e.Server=Y,e.ServerModule=Z,e.ServerResponse=q,e.bootstrap$=J,e.cloneNode=M,e.getQueries=S,e.isRxComment=b,e.isRxDocument=x,e.isRxDocumentType=_,e.isRxElement=E,e.isRxProcessingInstruction=function(t){return t.nodeType===e.RxNodeType.PROCESSING_INSTRUCTION_NODE},e.isRxText=O,e.matchSelector=C,e.matchSelectors=D,e.parse=w,e.querySelector=R,e.querySelectorAll=function e(t,n,r,o){if(void 0===r&&(r=null),void 0===o&&(o=[]),r||t.length){r=r||t.shift();for(var i,s=y(n);!(i=s()).done;){var u=i.value;if(u instanceof z)if(D(u,r.selectors))if(t.length){var c=e(t,u.childNodes);c&&Array.prototype.push.apply(o,c)}else o.push(u);else if(!r.inner){var a=e(t,u.childNodes,r);a&&Array.prototype.push.apply(o,a)}}}return o.length?o:null},e.render$=B,e.template$=Q,e}({},htmlparser2,rxcomp,rxjs,rxjs.operators);
//# sourceMappingURL=rxcomp-server.min.js.map