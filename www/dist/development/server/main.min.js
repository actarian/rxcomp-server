/**
 * @license rxcomp-server v1.0.0-beta.13
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("stream"),require("http"),require("url"),require("https"),require("zlib"),require("rxjs/operators"),require("rxcomp"),require("rxjs"),require("htmlparser2")):"function"==typeof define&&define.amd?define(["exports","stream","http","url","https","zlib","rxjs/operators","rxcomp","rxjs","htmlparser2"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).main={},e.Stream,e.http,e.Url,e.https,e.zlib,e.rxjs.operators,e.rxcomp,e.rxjs,e.htmlparser2)}(this,(function(e,t,r,n,o,s,i,a,u,c){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;var l="default"in i?i.default:i,h="default"in a?a.default:a,p="default"in u?u.default:u,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}const y=t.Readable,m=Symbol("buffer"),b=Symbol("type");class g{constructor(){this[b]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let s;s=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof g?o[m]:Buffer.from("string"==typeof o?o:String(o)),n+=s.length,r.push(s)}}this[m]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[b]=o)}get size(){return this[m].length}get type(){return this[b]}text(){return Promise.resolve(this[m].toString())}arrayBuffer(){const e=this[m],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new y;return e._read=function(){},e.push(this[m]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const s=Math.max(o-n,0),i=this[m].slice(n,n+s),a=new g([],{type:arguments[2]});return a[m]=i,a}}function v(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let w;Object.defineProperties(g.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(g.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),v.prototype=Object.create(Error.prototype),v.prototype.constructor=v,v.prototype.name="FetchError";try{w=require("encoding").convert}catch(e){}const _=Symbol("Body internals"),O=t.PassThrough;function T(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.size;let s=void 0===o?0:o;var i=n.timeout;let a=void 0===i?0:i;null==e?e=null:x(e)?e=Buffer.from(e.toString()):H(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof t||(e=Buffer.from(String(e)))),this[_]={body:e,disturbed:!1,error:null},this.size=s,this.timeout=a,e instanceof t&&e.on("error",(function(e){const t="AbortError"===e.name?e:new v(`Invalid response body while trying to fetch ${r.url}: ${e.message}`,"system",e);r[_].error=t}))}function E(){var e=this;if(this[_].disturbed)return T.Promise.reject(new TypeError("body used already for: "+this.url));if(this[_].disturbed=!0,this[_].error)return T.Promise.reject(this[_].error);let r=this.body;if(null===r)return T.Promise.resolve(Buffer.alloc(0));if(H(r)&&(r=r.stream()),Buffer.isBuffer(r))return T.Promise.resolve(r);if(!(r instanceof t))return T.Promise.resolve(Buffer.alloc(0));let n=[],o=0,s=!1;return new T.Promise((function(t,i){let a;e.timeout&&(a=setTimeout((function(){s=!0,i(new v(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),r.on("error",(function(t){"AbortError"===t.name?(s=!0,i(t)):i(new v(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),r.on("data",(function(t){if(!s&&null!==t){if(e.size&&o+t.length>e.size)return s=!0,void i(new v(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,n.push(t)}})),r.on("end",(function(){if(!s){clearTimeout(a);try{t(Buffer.concat(n,o))}catch(t){i(new v(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function x(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function H(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function P(e){let r,n,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof t&&"function"!=typeof o.getBoundary&&(r=new O,n=new O,o.pipe(r),o.pipe(n),e[_].body=r,o=n),o}function j(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":x(e)?"application/x-www-form-urlencoded;charset=UTF-8":H(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof t?null:"text/plain;charset=UTF-8"}function N(e){const t=e.body;return null===t?0:H(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}T.prototype={get body(){return this[_].body},get bodyUsed(){return this[_].disturbed},arrayBuffer(){return E.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return E.call(this).then((function(t){return Object.assign(new g([],{type:e.toLowerCase()}),{[m]:t})}))},json(){var e=this;return E.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return T.Promise.reject(new v(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return E.call(this).then((function(e){return e.toString()}))},buffer(){return E.call(this)},textConverted(){var e=this;return E.call(this).then((function(t){return function(e,t){if("function"!=typeof w)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,s="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));n&&(s=n.pop(),"gb2312"!==s&&"gbk"!==s||(s="gb18030"));return w(e,"UTF-8",s).toString()}(t,e.headers)}))}},Object.defineProperties(T.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),T.mixIn=function(e){for(const t of Object.getOwnPropertyNames(T.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(T.prototype,t);Object.defineProperty(e,t,r)}},T.Promise=global.Promise;const S=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,R=/[^\t\x20-\x7e\x80-\xff]/;function C(e){if(e=""+e,S.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function k(e){if(e=""+e,R.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function A(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const M=Symbol("map");class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[M]=Object.create(null),e instanceof I){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){C(e=""+e);const t=A(this[M],e);return void 0===t?null:this[M][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=q(this),n=0;for(;n<r.length;){var o=r[n];const s=o[0],i=o[1];e.call(t,i,s,this),r=q(this),n++}}set(e,t){t=""+t,C(e=""+e),k(t);const r=A(this[M],e);this[M][void 0!==r?r:e]=[t]}append(e,t){t=""+t,C(e=""+e),k(t);const r=A(this[M],e);void 0!==r?this[M][r].push(t):this[M][e]=[t]}has(e){return C(e=""+e),void 0!==A(this[M],e)}delete(e){C(e=""+e);const t=A(this[M],e);void 0!==t&&delete this[M][t]}raw(){return this[M]}keys(){return L(this,"key")}values(){return L(this,"value")}[Symbol.iterator](){return L(this,"key+value")}}function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[M]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[M][t].join(", ")}:function(t){return[t.toLowerCase(),e[M][t].join(", ")]})}I.prototype.entries=I.prototype[Symbol.iterator],Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(I.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const D=Symbol("internal");function L(e,t){const r=Object.create(z);return r[D]={target:e,kind:t,index:0},r}const z=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==z)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[D];const t=e.target,r=e.kind,n=e.index,o=q(t,r);return n>=o.length?{value:void 0,done:!0}:(this[D].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function B(e){const t=Object.assign({__proto__:null},e[M]),r=A(e[M],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(z,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const U=Symbol("Response internals"),$=r.STATUS_CODES;class F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T.call(this,e,t);const r=t.status||200,n=new I(t.headers);if(null!=e&&!n.has("Content-Type")){const t=j(e);t&&n.append("Content-Type",t)}this[U]={url:t.url,status:r,statusText:t.statusText||$[r],headers:n,counter:t.counter}}get url(){return this[U].url||""}get status(){return this[U].status}get ok(){return this[U].status>=200&&this[U].status<300}get redirected(){return this[U].counter>0}get statusText(){return this[U].statusText}get headers(){return this[U].headers}clone(){return new F(P(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}T.mixIn(F.prototype),Object.defineProperties(F.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(F.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const V=Symbol("Request internals"),K=n.parse,G=n.format,X="destroy"in t.Readable.prototype;function J(e){return"object"==typeof e&&"object"==typeof e[V]}class W{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J(e)?t=K(e.url):(t=e&&e.href?K(e.href):K(""+e),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||J(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:J(e)&&null!==e.body?P(e):null;T.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const s=new I(r.headers||e.headers||{});if(null!=o&&!s.has("Content-Type")){const e=j(o);e&&s.append("Content-Type",e)}let i=J(e)?e.signal:null;if("signal"in r&&(i=r.signal),null!=i&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(i))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[V]={method:n,redirect:r.redirect||e.redirect||"follow",headers:s,parsedURL:t,signal:i},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[V].method}get url(){return G(this[V].parsedURL)}get headers(){return this[V].headers}get redirect(){return this[V].redirect}get signal(){return this[V].signal}clone(){return new W(this)}}function Y(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}T.mixIn(W.prototype),Object.defineProperty(W.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(W.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y.prototype.name="AbortError";const Z=t.PassThrough,Q=n.resolve;function ee(e,n){if(!ee.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return T.Promise=ee.Promise,new ee.Promise((function(i,a){const u=new W(e,n),c=function(e){const r=e[V].parsedURL,n=new I(e[V].headers);if(n.has("Accept")||n.set("Accept","*/*"),!r.protocol||!r.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(r.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof t.Readable&&!X)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=N(e);"number"==typeof t&&(o=String(t))}o&&n.set("Content-Length",o),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let s=e.agent;return"function"==typeof s&&(s=s(r)),n.has("Connection")||s||n.set("Connection","close"),Object.assign({},r,{method:e.method,headers:B(n),agent:s})}(u),l=("https:"===c.protocol?o:r).request,h=u.signal;let p=null;const f=function(){let e=new Y("The user aborted a request.");a(e),u.body&&u.body instanceof t.Readable&&u.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(h&&h.aborted)return void f();const d=function(){f(),b()},y=l(c);let m;function b(){y.abort(),h&&h.removeEventListener("abort",d),clearTimeout(m)}h&&h.addEventListener("abort",d),u.timeout&&y.once("socket",(function(e){m=setTimeout((function(){a(new v("network timeout at: "+u.url,"request-timeout")),b()}),u.timeout)})),y.on("error",(function(e){a(new v(`request to ${u.url} failed, reason: ${e.message}`,"system",e)),b()})),y.on("response",(function(e){clearTimeout(m);const t=function(e){const t=new I;for(const r of Object.keys(e))if(!S.test(r))if(Array.isArray(e[r]))for(const n of e[r])R.test(n)||(void 0===t[M][r]?t[M][r]=[n]:t[M][r].push(n));else R.test(e[r])||(t[M][r]=[e[r]]);return t}(e.headers);if(ee.isRedirect(e.statusCode)){const r=t.get("Location"),n=null===r?null:Q(u.url,r);switch(u.redirect){case"error":return a(new v("redirect mode is set to error: "+u.url,"no-redirect")),void b();case"manual":if(null!==n)try{t.set("Location",n)}catch(e){a(e)}break;case"follow":if(null===n)break;if(u.counter>=u.follow)return a(new v("maximum redirect reached at: "+u.url,"max-redirect")),void b();const r={headers:new I(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:u.body,signal:u.signal,timeout:u.timeout};return 303!==e.statusCode&&u.body&&null===N(u)?(a(new v("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void b()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==u.method)||(r.method="GET",r.body=void 0,r.headers.delete("content-length")),i(ee(new W(n,r))),void b())}}e.once("end",(function(){h&&h.removeEventListener("abort",d)}));let r=e.pipe(new Z);const n={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:u.size,timeout:u.timeout,counter:u.counter},o=t.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===o||204===e.statusCode||304===e.statusCode)return p=new F(r,n),void i(p);const c={flush:s.Z_SYNC_FLUSH,finishFlush:s.Z_SYNC_FLUSH};if("gzip"==o||"x-gzip"==o)return r=r.pipe(s.createGunzip(c)),p=new F(r,n),void i(p);if("deflate"!=o&&"x-deflate"!=o){if("br"==o&&"function"==typeof s.createBrotliDecompress)return r=r.pipe(s.createBrotliDecompress()),p=new F(r,n),void i(p);p=new F(r,n),i(p)}else{e.pipe(new Z).once("data",(function(e){r=8==(15&e[0])?r.pipe(s.createInflate()):r.pipe(s.createInflateRaw()),p=new F(r,n),i(p)}))}})),function(e,t){const r=t.body;null===r?e.end():H(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(y,u)}))}ee.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},ee.Promise=global.Promise;var te,re=(te=Object.freeze({__proto__:null,default:ee,Headers:I,Request:W,Response:F,FetchError:v}))&&te.default||te,ne=d((function(e,t){var r=re.default||re,n=function(e,t){return/^\/\//.test(e)&&(e="https:"+e),r.call(this,e,t)};e.exports=t=n,t.fetch=n,t.Headers=re.Headers,t.Request=re.Request,t.Response=re.Response,t.default=n})),oe=ne.fetch.bind({});oe.polyfill=!0,f.fetch||(f.fetch=oe,f.Response=ne.Response,f.Headers=ne.Headers,f.Request=ne.Request)
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */;var se=function(e,t){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var ie=function(){return(ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var ae=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function ue(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function le(e){return this instanceof le?(this.v=e,this):new le(e)}var he=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};var pe=Object.freeze({__proto__:null,__extends:function(e,t){function r(){this.constructor=e}se(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return ie},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},__decorate:function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},__createBinding:ae,__exportStar:function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||ae(t,e,r)},__values:ue,__read:ce,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ce(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n},__await:le,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof le?Promise.resolve(r.value.v).then(u,c):l(s[0][2],r)}catch(e){l(s[0][3],e)}var r}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:le(e[n](t)),done:"return"===n}:o?o(t):t}:o}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=ue(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&ae(t,e,r);return he(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}),fe=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpEventType=void 0,function(e){e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e[e.ResponseError=6]="ResponseError"}(t.HttpEventType||(t.HttpEventType={}))})),de=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpHeaders=void 0;var r=function(){function e(t){var r,n=this;this.headers_=new Map;var o=this.headers_;t instanceof e?t.headers_.forEach((function(e,t){o.set(t,e)})):"function"==typeof(null===(r=t)||void 0===r?void 0:r.forEach)?t.forEach((function(e,t){o.set(t,e.split(", "))})):"object"==typeof t?Object.keys(t).forEach((function(e){var r=t[e];"string"==typeof r&&(r=[r]),o.has(e)?r.forEach((function(t){return n.append(e,t)})):o.set(e,r)})):"string"==typeof t&&t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),s=e.slice(t+1).trim();o.has(r)?n.append(r,s):o.set(r,[s])}})),o.has("Accept")||o.set("Accept",["application/json","text/plain","*/*"]),o.has("Content-Type")||o.set("Content-Type",["application/json"])}return e.prototype.has=function(e){return this.headers_.has(e)},e.prototype.get=function(e){var t=this.headers_.get(e);return t?t.join(", "):null},e.prototype.set=function(e,t){var r=this.clone_();return r.headers_.set(e,t.split(", ")),r},e.prototype.append=function(e,t){var r=this.clone_(),n=r.headers_.has(e)&&r.headers_.get(e)||[];return n.push(t),r.headers_.set(e,n),r},e.prototype.delete=function(e){var t=this.clone_();return t.headers_.delete(e),t},e.prototype.forEach=function(e,t){var r=this;this.headers_.forEach((function(t,n){e(t.join(", "),n,r)}))},e.prototype.serialize=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),e},e.prototype.toObject=function(){var e={};return this.forEach((function(t,r){e[r]=t})),e},e.prototype.clone_=function(){var t=new e;return this.headers_.forEach((function(e,r){t.headers_.set(r,e)})),t},e}();t.HttpHeaders=r})),ye=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpErrorResponse=void 0;var r=function(e){function t(t){var r=e.call(this,(null==t?void 0:t.message)||"Unknown Error")||this;return r.status=0,r.statusText="Unknown Error",r.ok=!1,r.type=fe.HttpEventType.ResponseError,r.message="Unknown Error",r.name="HttpErrorResponse",t&&(r.headers=new de.HttpHeaders(t.headers),r.status=t.status||r.status,r.statusText=t.statusText||r.statusText,r.url=t.url||r.url,r.error=t.error||r.error,r.name=t.name||r.name,r.request=t.request||null),r}return pe.__extends(t,e),t.prototype.clone=function(e){return new t(e=Object.assign({headers:this.headers,status:this.status,statusText:this.statusText,url:this.url,error:this.error,message:this.message,name:this.name,request:this.request},e||{}))},t}(Error);t.HttpErrorResponse=r})),me=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpResponseBase=t.HttpResponse=t.HttpHeaderResponse=void 0;var r=function(){function e(e){this.status=200,this.statusText="OK",this.type=fe.HttpEventType.ResponseHeader,e&&(this.headers=new de.HttpHeaders(e.headers),this.status=e.status||this.status,this.statusText=e.statusText||this.statusText,this.url=e.url||this.url),this.ok=this.status>=200&&this.status<300}return e.prototype.clone=function(t){return new e(t=Object.assign({headers:this.headers,status:this.status,statusText:this.statusText,url:this.url,ok:this.ok,type:this.type},t||{}))},e}();t.HttpHeaderResponse=r;var n=function(){function e(e){this.status=200,this.statusText="OK",this.type=fe.HttpEventType.Response,this.body=null,e&&(this.headers=new de.HttpHeaders(e.headers),this.status=e.status||this.status,this.statusText=e.statusText||this.statusText,this.url=e.url||this.url,this.body=e.body||this.body),this.ok=this.status>=200&&this.status<300}return e.prototype.clone=function(t){return new e(t=Object.assign({headers:this.headers,status:this.status,statusText:this.statusText,url:this.url,ok:this.ok,type:this.type,body:this.body},t||{}))},e.prototype.toObject=function(){var e={};return e.url=this.url,e.headers=this.headers.toObject(),e.status=this.status,e.statusText=this.statusText,e.ok=this.ok,e.type=this.type,e.body=this.body,e},e}();t.HttpResponse=n;var o=function(e,t,r){void 0===t&&(t=200),void 0===r&&(r="OK"),this.status=200,this.statusText="OK",this.headers=e.headers||new de.HttpHeaders,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||void 0,this.ok=this.status>=200&&this.status<300};t.HttpResponseBase=o})),be=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpFetchHandler=void 0;var r=function(){function e(){this.response_=null}return e.prototype.handle=function(e){var t=this;if(!e.method)throw new Error("missing method");var r,n=e.urlWithParams,o=e.toInitRequest(),s=h.TransferService.makeKey(e.transferKey);if(h.isPlatformBrowser&&e.hydrate&&h.TransferService.has(s)){var i=h.TransferService.get(s);i&&(r=new me.HttpResponse(i)),h.TransferService.remove(s)}return r?p.of(r):p.from(fetch(n,o).then((function(r){return t.getProgress(r,e)})).then((function(r){return t.getResponse(r,e)}))).pipe(l.tap((function(t){h.isPlatformServer&&e.hydrate&&h.TransferService.set(s,t.toObject())})),l.catchError((function(r){var n={error:r};t.response_&&(n.headers=t.response_.headers,n.status=t.response_.status,n.statusText=t.response_.statusText,n.url=t.response_.url,n.request=e);var o=new ye.HttpErrorResponse(n);return h.nextError$.next(o),p.of(t.response_)})),l.finalize((function(){t.response_=null})))},e.prototype.getProgress=function(e,t){var r=this,n=e.clone().body;if(h.isPlatformBrowser&&t.reportProgress&&n){var o=n.getReader(),s=e.headers&&e.headers.has("Content-Length")?+(e.headers.get("Content-Length")||0):0;return new Promise((function(n,i){var a={progress:0,percent:0,current:0,total:0};o.read().then((function(t){return function t(r,n){var i=a.current;return n?(a.total=s,a.current=s,a.progress=1,a.percent=100,o.closed.then((function(){return e.clone()}))):(r&&(i+=r.length||0,a.total=s,a.current=i,a.progress=i/s,a.percent=100*a.progress),o.read().then((function(e){var r=e.value,n=e.done;return t(r,n)})))}(t.value,t.done)})).then((function(e){return r.response_=new me.HttpResponse(e),"function"==typeof e[t.responseType]?e[t.responseType]().then((function(t){return r.response_=new me.HttpResponse(Object.assign(r.response_,{body:t})),e.ok?n(r.response_):i(r.response_)})):i(r.response_)})).catch((function(e){return console.log("upload error:",e)}))}))}return Promise.resolve(e)},e.prototype.getResponse=function(e,t){return this.response_=new me.HttpResponse(e),h.isPlatformBrowser&&t.reportProgress&&e.body?Promise.resolve(this.response_):this.getResponseType(e,t)},e.prototype.getResponseType=function(e,t){var r=this;return new Promise((function(n,o){return r.response_=new me.HttpResponse(e),"function"==typeof e[t.responseType]?e[t.responseType]().then((function(t){return r.response_=new me.HttpResponse(Object.assign(r.response_,{body:t})),e.ok?n(r.response_):o(r.response_)})):o(r.response_)}))},e.prototype.getReadableStream=function(e,t){var r=e.body.getReader();return new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var n=r.done,o=r.value;n?e.close():(e.enqueue(o),t())}))}()}})},e}();t.HttpFetchHandler=r})),ge=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpXhrHandler=void 0;var r=/^\)\]\}',?\n/,n=function(){function e(){}return e.prototype.handle=function(e){if(!e.method)throw new Error("missing method");if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return console.log("HttpXhrHandler.request",e),new p.Observable((function(t){var n=new XMLHttpRequest,o=e.urlWithParams,s=e.toInitRequest();if(!s.method)throw new Error("missing method");var i=h.TransferService.makeKey(e.transferKey);if(h.isPlatformBrowser&&e.hydrate&&h.TransferService.has(i)){var a=h.TransferService.get(i);return h.TransferService.remove(i),t.next(a),void t.complete()}n.open(s.method,o),e.withCredentials&&(n.withCredentials=!0);var u=e.headers;if(u.has("Accept")||u.set("Accept","application/json, text/plain, */*"),!u.has("Content-Type")){var c=e.detectContentTypeHeader();null!==c&&u.set("Content-Type",c)}console.log("HttpXhrHandler.contentType",u.get("Content-Type")),u.forEach((function(e,t){return n.setRequestHeader(t,e)})),e.responseType&&(n.responseType="json"!==e.responseType?e.responseType:"text");var l=e.serializeBody(),p=null,f=function(){if(null!==p)return p;var t=1223===n.status?204:n.status,r=n.statusText||"OK",o=new de.HttpHeaders(n.getAllResponseHeaders()),s=function(e){if("responseURL"in e&&e.responseURL)return e.responseURL;if(/^X-Request-URL:/m.test(e.getAllResponseHeaders()))return e.getResponseHeader("X-Request-URL");return null}(n)||e.url;return p=new me.HttpHeaderResponse({headers:o,status:t,statusText:r,url:s})},d=function(){var o=f(),s=o.headers,a=o.status,u=o.statusText,c=o.url,l=null;204!==a&&(l=void 0===n.response?n.responseText:n.response),0===a&&(a=l?200:0);var p=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof l){var d=l;l=l.replace(r,"");try{l=""!==l?JSON.parse(l):null}catch(e){l=d,p&&(p=!1,l={error:e,text:l})}}if(p){var y=new me.HttpResponse({body:l,headers:s,status:a,statusText:u,url:c});h.isPlatformServer&&e.hydrate&&h.TransferService.set(i,y),t.next(y),t.complete()}else{var m={error:new Error(u),headers:s,status:a,statusText:u,url:c,request:e},b=new ye.HttpErrorResponse(m);h.nextError$.next(b),t.error(b)}},y=function(r){var o=f().url,s=n.statusText||"Unknown Error",i=new de.HttpHeaders(n.getAllResponseHeaders()),a={error:new Error(s),headers:i,status:n.status||0,statusText:s,url:o,request:e},u=new ye.HttpErrorResponse(a);h.nextError$.next(u),t.error(u)},m=!1,b=function(r){m||(t.next(f()),m=!0);var o={type:fe.HttpEventType.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(o.total=r.total),"text"===e.responseType&&n.responseText&&(o.partialText=n.responseText),console.log(o),t.next(o)},g=function(e){var r={type:fe.HttpEventType.UploadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),t.next(r)};return n.addEventListener("load",d),n.addEventListener("error",y),e.reportProgress&&(n.addEventListener("progress",b),null!==l&&n.upload&&n.upload.addEventListener("progress",g)),n.send(l),t.next({type:fe.HttpEventType.Sent}),function(){n.removeEventListener("error",y),n.removeEventListener("load",d),e.reportProgress&&(n.removeEventListener("progress",b),null!==l&&n.upload&&n.upload.removeEventListener("progress",g)),n.readyState!==n.DONE&&n.abort()}}))},e}();t.HttpXhrHandler=n})),ve=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonpCallbackContext=t.interceptingHandler=t.HttpInterceptingHandler=t.xhrHandler=t.fetchHandler=t.NoopInterceptor=t.HttpInterceptors=t.HttpInterceptorHandler=void 0;var r=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}();t.HttpInterceptorHandler=r,t.HttpInterceptors=[];var n=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}();t.NoopInterceptor=n,t.fetchHandler=new be.HttpFetchHandler,t.xhrHandler=new ge.HttpXhrHandler;var o=function(){function e(){this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var n=t.HttpInterceptors;this.chain=n.reduceRight((function(e,t){return new r(e,t)}),t.fetchHandler)}return this.chain.handle(e)},e}();t.HttpInterceptingHandler=o,t.interceptingHandler=function(e,t){return void 0===t&&(t=[]),t?t.reduceRight((function(e,t){return new r(e,t)}),e):e},t.jsonpCallbackContext=function(){return"object"==typeof window?window:{}}})),we=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=[],n=[],o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pe.__extends(t,e),t.useInterceptors=function(e){if(null==e?void 0:e.length){var t=null==e?void 0:e.map((function(e){return new e}));ve.HttpInterceptors.push.apply(ve.HttpInterceptors,t)}return this},t.meta={declarations:pe.__spread(r,n),exports:pe.__spread(r,n)},t}(h.Module);t.default=o})),_e=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpHandler=void 0;var r=function(){};t.HttpHandler=r})),Oe=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpParams=t.HttpUrlEncodingCodec=void 0;var r=function(){function e(){}return e.prototype.encodeKey=function(e){return o(e)},e.prototype.encodeValue=function(e){return o(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();t.HttpUrlEncodingCodec=r;var n=function(){function e(t,n){void 0===n&&(n=new r),this.params_=new Map,this.encoder=n;var o=this.params_;t instanceof e?t.params_.forEach((function(e,t){o.set(t,e)})):"object"==typeof t?Object.keys(t).forEach((function(e){var r=t[e];o.set(e,Array.isArray(r)?r:[r])})):"string"==typeof t&&function(e,t,r){if(t.length>0){t.split("&").forEach((function(t){var n=t.indexOf("="),o=pe.__read(-1==n?[r.decodeKey(t),""]:[r.decodeKey(t.slice(0,n)),r.decodeValue(t.slice(n+1))],2),s=o[0],i=o[1],a=e.get(s)||[];a.push(i),e.set(s,a)}))}}(o,t,this.encoder)}return e.prototype.keys=function(){return Array.from(this.params_.keys())},e.prototype.has=function(e){return this.params_.has(e)},e.prototype.get=function(e){var t=this.params_.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.params_.get(e)||null},e.prototype.set=function(e,t){var r=this.clone_();return r.params_.set(e,[t]),r},e.prototype.append=function(e,t){var r=this.clone_();if(r.has(e)){var n=r.params_.get(e)||[];n.push(t),r.params_.set(e,n)}else r.params_.set(e,[t]);return r},e.prototype.delete=function(e){var t=this.clone_();return t.params_.delete(e),t},e.prototype.toString=function(){var e=this;return this.keys().map((function(t){var r=e.params_.get(t);return e.encoder.encodeKey(t)+(r?"="+r.map((function(t){return e.encoder.encodeValue(t)})).join("&"):"")})).filter((function(e){return""!==e})).join("&")},e.prototype.toObject=function(){var e=this,t={};return this.keys().map((function(r){var n=e.params_.get(r);n&&(t[r]=n)})),t},e.prototype.clone_=function(){var t=new e(void 0,this.encoder);return this.params_.forEach((function(e,r){t.params_.set(r,e)})),t},e}();function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}t.HttpParams=n})),Te=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpRequest=void 0;var r=function(){function e(e,t,r,n){this.url=t,this.reportProgress=!1,this.withCredentials=!1,this.hydrate=!0,this.observe="body",this.responseType="json";var o,s=/\.(json|xml|txt)(\?.*)?$/.test(t);this.method=s?"GET":e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==r?r:null,o=n):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.observe=o.observe||this.observe,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=new de.HttpHeaders(o.headers)),o.params&&(this.params=new Oe.HttpParams(o.params))),this.headers||(this.headers=new de.HttpHeaders),this.params||(this.params=new Oe.HttpParams);var i=this.params.toString(),a=t.indexOf("?"),u=-1===a?"?":a<t.length-1?"&":"";this.urlWithParams=t+(i.length?u+i:i)}return Object.defineProperty(e.prototype,"transferKey",{get:function(){var e=h.getLocationComponents(this.url).pathname,t=h.optionsToKey(this.params.toObject()),r=h.optionsToKey(this.body),n=this.method+"-"+e+"-"+t+"-"+r;return n=n.replace(/(\s+)|(\W+)/g,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1]?"":"_"})),console.log("transferKey",n),n},enumerable:!1,configurable:!0}),e.prototype.serializeBody=function(){return null===this.body?null:n(this.body)||o(this.body)||s(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oe.HttpParams?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body||s(this.body)?null:o(this.body)?this.body.type||null:n(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oe.HttpParams?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.toInitRequest=function(){return{method:this.method,headers:this.headers.serialize(),body:this.serializeBody(),mode:"same-origin",credentials:"same-origin",cache:"default",redirect:"error"}},e.prototype.toFetchRequest__=function(){return new Request(this.urlWithParams,this.toInitRequest())},e.prototype.clone=function(t){return t=Object.assign({headers:this.headers,reportProgress:this.reportProgress,params:this.params,responseType:this.responseType,withCredentials:this.withCredentials,observe:this.observe,body:this.body,url:this.url,method:this.method},t||{}),new e(this.method,this.url,this.body,t)},e.prototype.toObject=function(){var e={};return e.url=this.url,e.method=this.method,e.headers=this.headers.toObject(),e.params=this.params.toObject(),e.body=this.body,e.reportProgress=this.reportProgress,e.responseType=this.responseType,e.withCredentials=this.withCredentials,e.observe=this.observe,e},e}();function n(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function o(e){return"undefined"!=typeof Blob&&e instanceof Blob}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}t.HttpRequest=r})),Ee=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.incrementPendingRequest=function(){e.pendingRequests$.next(e.pendingRequests$.getValue()+1)},e.decrementPendingRequest=function(){e.pendingRequests$.next(e.pendingRequests$.getValue()-1)},e.request$=function(t,r,n){var o,s=this;if(void 0===n&&(n={}),t instanceof Te.HttpRequest)o=t;else{var i=void 0;i=n.headers instanceof de.HttpHeaders?n.headers:new de.HttpHeaders(n.headers);var a=void 0;n.params&&(a=new Oe.HttpParams(n.params)),o=new Te.HttpRequest(t,r,void 0!==n.body?n.body:null,{headers:i,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}e.incrementPendingRequest();var u,c=p.of(o).pipe(l.concatMap((function(e){return s.handler.handle(e)})),l.finalize((function(){return e.decrementPendingRequest()})));return t instanceof Te.HttpRequest||"events"===n.observe?c.pipe(l.catchError((function(e){return console.log("error",e),p.throwError(s.getError(e,null,o))}))):c.pipe(l.filter((function(e){return e instanceof me.HttpResponse}))).pipe(l.map((function(e){switch(u=e,n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body;case"blob":if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body;case"text":if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body;case"json":default:return e.body}case"response":return e;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}})),l.catchError((function(e){return console.log("error",e),p.throwError(s.getError(e,u,o))})))},e.delete$=function(e,t){return void 0===t&&(t={}),this.request$("DELETE",e,t)},e.get$=function(e,t){return void 0===t&&(t={}),this.request$("GET",e,t)},e.head$=function(e,t){return void 0===t&&(t={}),this.request$("HEAD",e,t)},e.jsonp$=function(e,t){return this.request$("JSONP",e,{params:(new Oe.HttpParams).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.options$=function(e,t){return void 0===t&&(t={}),this.request$("OPTIONS",e,t)},e.patch$=function(e,t,r){return void 0===r&&(r={}),this.request$("PATCH",e,n(r,t))},e.post$=function(e,t,r){return void 0===r&&(r={}),this.request$("POST",e,n(r,t))},e.put$=function(e,t,r){return void 0===r&&(r={}),this.request$("PUT",e,n(r,t))},e.getError=function(e,t,r){e.status||(e.statusCode=(null==t?void 0:t.status)||0),e.statusMessage||(e.statusMessage=(null==t?void 0:t.statusText)||"Unknown Error");var n={error:e,status:e.status,statusText:e.statusText,message:e.message,request:r};return t&&(n.headers=t.headers,n.status=n.status||t.status,n.statusText=n.statusText||t.statusText,n.url=t.url),new ye.HttpErrorResponse(n)},e.pendingRequests$=new p.BehaviorSubject(0),e.handler=new ve.HttpInterceptingHandler,e}();function n(e,t){return Object.assign({},e,{body:t})}t.default=r})),xe=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HttpModule",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(t,"HttpErrorResponse",{enumerable:!0,get:function(){return ye.HttpErrorResponse}}),Object.defineProperty(t,"HttpEventType",{enumerable:!0,get:function(){return fe.HttpEventType}}),Object.defineProperty(t,"HttpFetchHandler",{enumerable:!0,get:function(){return be.HttpFetchHandler}}),Object.defineProperty(t,"HttpHandler",{enumerable:!0,get:function(){return _e.HttpHandler}}),Object.defineProperty(t,"HttpHeaders",{enumerable:!0,get:function(){return de.HttpHeaders}}),Object.defineProperty(t,"fetchHandler",{enumerable:!0,get:function(){return ve.fetchHandler}}),Object.defineProperty(t,"HttpInterceptingHandler",{enumerable:!0,get:function(){return ve.HttpInterceptingHandler}}),Object.defineProperty(t,"HttpInterceptorHandler",{enumerable:!0,get:function(){return ve.HttpInterceptorHandler}}),Object.defineProperty(t,"HttpInterceptors",{enumerable:!0,get:function(){return ve.HttpInterceptors}}),Object.defineProperty(t,"interceptingHandler",{enumerable:!0,get:function(){return ve.interceptingHandler}}),Object.defineProperty(t,"jsonpCallbackContext",{enumerable:!0,get:function(){return ve.jsonpCallbackContext}}),Object.defineProperty(t,"NoopInterceptor",{enumerable:!0,get:function(){return ve.NoopInterceptor}}),Object.defineProperty(t,"xhrHandler",{enumerable:!0,get:function(){return ve.xhrHandler}}),Object.defineProperty(t,"HttpParams",{enumerable:!0,get:function(){return Oe.HttpParams}}),Object.defineProperty(t,"HttpUrlEncodingCodec",{enumerable:!0,get:function(){return Oe.HttpUrlEncodingCodec}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return Te.HttpRequest}}),Object.defineProperty(t,"HttpHeaderResponse",{enumerable:!0,get:function(){return me.HttpHeaderResponse}}),Object.defineProperty(t,"HttpResponse",{enumerable:!0,get:function(){return me.HttpResponse}}),Object.defineProperty(t,"HttpResponseBase",{enumerable:!0,get:function(){return me.HttpResponseBase}}),Object.defineProperty(t,"HttpXhrHandler",{enumerable:!0,get:function(){return ge.HttpXhrHandler}}),Object.defineProperty(t,"HttpService",{enumerable:!0,get:function(){return Ee.default}})}));function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t,r){return t&&He(e.prototype,t),r&&He(e,r),e}function je(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ce(e,t,r){return(Ce=Re()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Se(o,r.prototype),o}).apply(null,arguments)}function ke(e){var t="function"==typeof Map?new Map:void 0;return(ke=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ce(e,arguments,Ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Se(n,e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var qe,De,Le=require("fs");!function(e){e.Memory="memory",e.File="file"}(qe||(qe={})),function(e){e.Public="public",e.Private="private",e.NoCache="no-cache",e.NoStore="no-store"}(De||(De={}));var ze=function(){function e(e){this.date=new Date,this.maxAge=0,this.cacheControl=De.Public,e&&(this.value=e.value,this.date=e.date?new Date(e.date):this.date,this.maxAge=e.maxAge||this.maxAge,this.cacheControl=e.cacheControl||this.cacheControl)}return Pe(e,[{key:"expired",get:function(){return this.cacheControl===De.NoStore||0===this.maxAge||this.date.getTime()+1e3*this.maxAge<Date.now()}}]),e}(),Be=function(){function e(){}return e.has=function(e,t){void 0===e&&(e="cache");var r=!1;switch(this.mode){case qe.File:r=this.hasFile(e,t);break;case qe.Memory:default:var n=this.getPath(e,t);r=this.cache_.has(n)}return r},e.get=function(e,t){void 0===e&&(e="cache");var r,n=null,o=this.getPath(e,t);switch(this.mode){case qe.File:var s;if(this.hasFile(e,t))if(r=this.readFile(e,t))if(r.expired)this.unlinkFile(e,t);else n=null==(s=r)?void 0:s.value;break;case qe.Memory:default:if(this.cache_.has(o)){var i=this.cache_.get(o);i&&(r=new ze(JSON.parse(i)))&&(r.expired?this.cache_.delete(o):n=r.value)}}return n},e.set=function(e,t,r,n,o){void 0===e&&(e="cache"),void 0===n&&(n=0),void 0===o&&(o=De.Public);var s=this.getPath(e,t),i=new ze({value:r,maxAge:n,cacheControl:o});switch(this.mode){case qe.File:this.writeFile(e,t,i);break;case qe.Memory:default:var a=this.serialize(i);this.cache_.set(s,a)}return r},e.delete=function(e,t){switch(void 0===e&&(e="cache"),this.mode){case qe.File:this.unlinkFile(e,t);break;case qe.Memory:default:var r=this.getPath(e,t);this.cache_.has(r)&&this.cache_.delete(r)}},e.hasFile=function(e,t){void 0===e&&(e="cache");var r=!1,n=this.getPath(e,t);try{Le.existsSync(n)&&(r=!0)}catch(e){throw e}return r},e.readFile=function(e,t){void 0===e&&(e="cache");var r=null,n=this.getPath(e,t);try{var o=Le.readFileSync(n,"utf8");r=new ze(JSON.parse(o))}catch(e){throw e}return r},e.writeFile=function(e,t,r){void 0===e&&(e="cache");var n=this.getPath(e,t);try{var o=this.serialize(r);Le.writeFileSync(n,o,"utf8")}catch(e){throw e}return r},e.unlinkFile=function(e,t){void 0===e&&(e="cache");var r=this.getPath(e,t);try{Le.existsSync(r)&&Le.unlinkSync(r)}catch(e){throw e}},e.readFile$=function(e,t){void 0===e&&(e="cache");var r=this;return u.Observable.create((function(n){var o=r.getPath(e,t);Le.readFile(o,"utf8",(function(e,t){if(e)n.error(e);else{var r=new ze(JSON.parse(t));n.next(r),n.complete()}}))}))},e.writeFile$=function(e,t,r){void 0===e&&(e="cache");var n=this;return u.Observable.create((function(o){var s=n.getPath(e,t),i=n.serialize(r);Le.writeFile(s,i,"utf8",(function(e){e?o.error(e):(o.next(r),o.complete())}))}))},e.serialize=function(e){var t=new Map,r=JSON.stringify(e,(function(e,r){if(r&&"object"==typeof r){if(t.has(r))return;t.set(r,!0)}return r}),0);return t.clear(),r},e.getPath=function(e,t){void 0===e&&(e="cache");var r=this.getKey(e,t);return""+this.folder+r},e.getKey=function(e,t){void 0===e&&(e="cache");var r=(e+"-"+t).toLowerCase();return r=r.replace(/(\s+)|(\W+)/g,(function(){return(arguments.length<=1?void 0:arguments[1])?"":"_"}))},e}();Be.cache_=new Map,Be.mode=qe.Memory;var Ue,$e,Fe=function(e){function t(){return e.apply(this,arguments)||this}je(t,e);var r=t.prototype;return r.contains=function(e){return-1!==this.indexOf(e)},r.item=function(e){return e>0&&e<this.length?this[e]:null},t}(ke(Array)),Ve=function(){function e(){this.hash_="",this.host_="",this.hostname_="",this.pathname_="",this.port_="",this.protocol_="",this.search_="",this.href_="",this.ancestorOrigins_=new Fe}var t=e.prototype;return t.assign=function(e){this.href=e},t.reload=function(){},t.replace=function(e){this.href=e},t.toString=function(){return this.href},Pe(e,[{key:"hash",get:function(){return this.hash_},set:function(e){this.hash_=e,this.href=this.href}},{key:"host",get:function(){return this.host_},set:function(e){this.host_=e,this.href=this.href}},{key:"hostname",get:function(){return this.hostname_},set:function(e){this.hostname_=e,this.href=this.href}},{key:"pathname",get:function(){return this.pathname_},set:function(e){this.pathname_=e,this.href=this.href}},{key:"port",get:function(){return this.port_},set:function(e){this.port_=e,this.href=this.href}},{key:"protocol",get:function(){return this.protocol_},set:function(e){this.protocol_=e,this.href=this.href}},{key:"search",get:function(){return this.search_},set:function(e){this.search_=e,this.href=this.href}},{key:"href",get:function(){var e=this.protocol+"//"+this.host+(this.port.length?":"+this.port:"")+this.pathname+this.search+this.hash;return this.href_=e,e},set:function(e){if(this.href_!==e){this.href_=e;var t=a.getLocationComponents(e);this.protocol_=t.protocol,this.host_=t.host,this.hostname_=t.hostname,this.port_=t.port,this.pathname_=t.pathname,this.search_=t.search,this.hash_=t.hash}}},{key:"origin",get:function(){return this.protocol+"//"+this.host+(this.port.length?":"+this.port:"")}},{key:"ancestorOrigins",get:function(){return this.ancestorOrigins_}}],[{key:"location",get:function(){return this.location_?this.location_:this.location_=new e}}]),e}(),Ke=function(){function e(){this.currentIndex_=0,this.history_=[],this.scrollRestoration="auto"}var t=e.prototype;return t.back=function(){if(this.currentIndex_>0){this.currentIndex_--;var e=this.history_[this.currentIndex_];e.url&&(Ve.location.href=e.url)}},t.forward=function(){if(this.currentIndex_<this.history_.length-1){this.currentIndex_++;var e=this.history_[this.currentIndex_];e.url&&(Ve.location.href=e.url)}},t.go=function(e){if("number"==typeof e){var t=this.currentIndex_+e;if(t>0&&t<this.history_.length){var r=this.history_[t];r.url&&(Ve.location.href=r.url)}}},t.pushState=function(e,t,r){this.history_.push({data:e,title:t,url:r}),this.currentIndex_=this.history_.length-1},t.replaceState=function(e,t,r){this.history_.length?this.history_.splice(this.history_.length-1,1,{data:e,title:t,url:r}):this.history_.push({data:e,title:t,url:r}),this.currentIndex_=this.history_.length-1},Pe(e,[{key:"length",get:function(){return this.history_.length}}],[{key:"history",get:function(){return this.history_?this.history_:this.history_=new e}}]),e}();!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(Ue||(Ue={})),function(e){e[e.None=-1]="None",e[e.Id=0]="Id",e[e.Class=1]="Class",e[e.Attribute=2]="Attribute",e[e.TagName=3]="TagName"}($e||($e={}));var Ge=function(){function e(e){void 0===e&&(e=null),this.nodeValue=null,this.parentNode=e,this.nodeType=-1}var t=e.prototype;return t.cloneNode=function(e){return void 0===e&&(e=!1),lt.apply(this,[this,e])},t.serialize=function(){return""},e}(),Xe=function(){var e=t.prototype;function t(e){Object.defineProperty(this,"node",{value:e,writable:!1,enumerable:!1}),this.init()}return e.item=function(e){var t=Object.keys(this);return t.length>e?t[e]:void 0},e.getPropertyPriority=function(e){var t=this[e];return t&&t.indexOf("!important")?"important":""},e.getPropertyValue=function(e){return this[e]},e.setProperty=function(e,t,r){this[e]=t+("important"===r?"!important":""),this.serialize_()},e.removeProperty=function(e){delete this[e],this.serialize_()},e.serialize_=function(){var e=this;this.node.attributes.style=Object.keys(this).map((function(t){return t+": "+e[t]+";"})).join(" ")},e.init=function(){var e,t=this;if(Object.keys(this).forEach((function(e){return delete t[e]})),null==(e=this.node.attributes)?void 0:e.style){[].concat(this.node.attributes.style.matchAll(/([^:]+):([^;]+);?\s*/gm)).forEach((function(e){var r=e[1],n=e[2];t[r]=n}))}},t}(),Je=function(e){function t(t){var r;return(r=e.call(this)||this).node=t,r.init(),r}je(t,e);var r=t.prototype;return r.item=function(e){return this[e]},r.contains=function(e){return-1!==this.indexOf(e)},r.add=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){-1!==e.indexOf(t)&&e.push(t)})),this.serialize_()},r.remove=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)})),this.serialize_()},r.toggle=function(e,t){var r=this.indexOf(e);return!1===t?(this.splice(r,1),this.serialize_(),!1):!0===t?(this.push(e),this.serialize_(),!0):-1!==r?(this.splice(r,1),this.serialize_(),!1):(this.push(e),this.serialize_(),!0)},r.replace=function(e,t){var r=this.indexOf(e);-1!==r&&this.splice(r,1),this.push(t),this.serialize_()},r.serialize_=function(){this.node.attributes.class=this.join(" ")},r.init=function(){var e;this.length=0,(null==(e=this.node.attributes)?void 0:e.class)&&Array.prototype.push.apply(this,this.node.attributes.class.split(" ").map((function(e){return e.trim()})))},t}(ke(Array)),We=function(e){function t(t,r,n){var o;return void 0===t&&(t=null),void 0===n&&(n=null),(o=e.call(this,t)||this).attributes={},o.nodeType=Ue.ELEMENT_NODE,o.nodeName=r,n&&"object"==typeof n&&(o.attributes=n),o.style=new Xe(Ae(o)),o.classList=new Je(Ae(o)),o.childNodes=[],o}je(t,e);var r=t.prototype;return r.append=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r=r.map((function(t){var r;return"string"==typeof t?r=new Ye(e,t):(r=t).parentNode=e,r})),Array.prototype.push.apply(this.childNodes,r)},r.prepend=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r=r.map((function(t){var r;return"string"==typeof t?r=new Ye(e,t):(r=t).parentNode=e,r})),Array.prototype.unshift.apply(this.childNodes,r)},r.replaceChildren=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.map((function(t){var r;return"string"==typeof t?r=new Ye(e,t):(r=t).parentNode=e,r}));this.childNodes=o},r.querySelectorAll=function(e){var t=ut(it(e),this.childNodes);return t&&t.length?t:null},r.querySelector=function(e){return ct(it(e),this.childNodes)},r.hasAttribute=function(e){return-1!==Object.keys(this.attributes).indexOf(e.toLowerCase())},r.getAttribute=function(e){return this.attributes[e.toLowerCase()]||null},r.setAttribute=function(e,t){this.attributes[e.toLowerCase()]=t.toString(),"style"===e?this.style.init():"class"===e&&this.classList.init()},r.removeAttribute=function(e){delete this.attributes[e],"style"===e?this.style.init():"class"===e&&this.classList.init()},r.replaceChild=function(e,t){var r=this.childNodes.indexOf(t);return-1!==r&&(this.childNodes[r]=e,e.parentNode=this),t},r.removeChild=function(e){if(!(e instanceof Ge))throw new Error("Uncaught TypeError: Failed to execute 'removeChild' on 'Node': parameter 1 is not of type 'Node'.");var t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Uncaught NotFoundError: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.");return this.childNodes.splice(t,1),e},r.insertBefore=function(e,t){void 0===t&&(t=null);var r=t?this.childNodes.indexOf(t):this.childNodes.length;return-1!==r&&(this.childNodes.splice(r,0,e),e.parentNode=this),e},r.cloneNode=function(e){return void 0===e&&(e=!1),lt.apply(this,[this,e])},r.addListener=function(e,t){},r.removeListener=function(e,t){},r.serialize=function(){return"<"+this.nodeName+this.serializeAttributes()+">"+this.childNodes.map((function(e){return e.serialize()})).join("")+"</"+this.nodeName+">"},r.serializeAttributes=function(){var e=this,t="",r=Object.keys(this.attributes);return r.length&&(t=" "+r.map((function(t){return t+'="'+e.attributes[t]+'"'})).join(" ")),t},Pe(t,[{key:"children",get:function(){var e,t=[],r=0,n=this.childNodes;for(e=n[r++];e;)(e=n[r++]).nodeType===Ue.ELEMENT_NODE&&t.push(e);return t}},{key:"childElementCount",get:function(){var e,t=0,r=0,n=this.childNodes;for(e=n[t++];e;)e.nodeType===Ue.ELEMENT_NODE&&r++,e=n[t++];return r}},{key:"firstChild",get:function(){var e=null;return this.childNodes.length&&(e=this.childNodes[0]),e}},{key:"firstElementChild",get:function(){for(var e,t=Ie(this.childNodes);!(e=t()).done;){var r=e.value;if(nt(r))return r}return null}},{key:"lastChild",get:function(){var e=null;return this.childNodes.length&&(e=this.childNodes[this.childNodes.length-1]),e}},{key:"lastElementChild",get:function(){for(var e=this.childNodes,t=e.length-1;t>-1;t--){var r=e[t];if(nt(r))return r}return null}},{key:"previousSibling",get:function(){var e=null;if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);t>0&&(e=this.parentNode.childNodes[t-1])}return e}},{key:"nextSibling",get:function(){var e=null;if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);-1!==t&&t<this.parentNode.childNodes.length-1&&(e=this.parentNode.childNodes[t])}return e}},{key:"wholeText",get:function(){if(this.nodeType===Ue.TEXT_NODE)return this.nodeValue}},{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"innerText",set:function(e){this.childNodes=[new Ye(this,e)]},get:function(){return this.childNodes.filter((function(e){return ot(e)||nt(e)})).map((function(e){return e.innerText})).join("")}},{key:"textContent",set:function(e){this.innerText=String(e)},get:function(){return this.innerText}},{key:"innerHTML",get:function(){return this.childNodes.map((function(e){return e.serialize()})).join("")},set:function(e){var t=this,r=st(e).childNodes.map((function(e){return e.parentNode=t,e}));this.childNodes=r}}]),t}(Ge),Ye=function(e){function t(t,r){var n;return void 0===t&&(t=null),(n=e.call(this,t)||this).nodeType=Ue.TEXT_NODE,n.nodeValue=String(r),n}return je(t,e),t.prototype.serialize=function(){return this.nodeValue},Pe(t,[{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}},{key:"textContent",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}}]),t}(Ge),Ze=function(e){function t(t,r){var n;return void 0===t&&(t=null),(n=e.call(this,t)||this).nodeType=Ue.COMMENT_NODE,n.nodeValue=String(r),n}return je(t,e),t.prototype.serialize=function(){return"\x3c!--"+this.nodeValue+"--\x3e"},Pe(t,[{key:"outerHTML",get:function(){var e=null;return this.parentNode&&(e=this.parentNode.serialize()),e}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}},{key:"textContent",set:function(e){this.nodeValue=String(e)},get:function(){return this.nodeValue}}]),t}(Ge),Qe=function(e){function t(t,r){var n;return void 0===t&&(t=null),(n=e.call(this,t)||this).nodeType=Ue.PROCESSING_INSTRUCTION_NODE,n.nodeValue=String(r),n}return je(t,e),t.prototype.serialize=function(){return"<"+this.nodeValue+">"},t}(Ge),et=function(e){function t(t,r){var n;return void 0===t&&(t=null),(n=e.call(this,t)||this).nodeType=Ue.DOCUMENT_TYPE_NODE,n.nodeValue=String(r),n}return je(t,e),t.prototype.serialize=function(){return"<"+this.nodeValue+">"},t}(Ge),tt=function(e){function t(){var t;return(t=e.call(this,null,"#document-fragment")||this).nodeType=Ue.DOCUMENT_FRAGMENT_NODE,t.childNodes=[],t}return je(t,e),t}(We),rt=function(e){function t(){var t;return(t=e.call(this,null,"#document")||this).location_=Ve.location,t.nodeType=Ue.DOCUMENT_NODE,t.childNodes=[],t}je(t,e);var r=t.prototype;return r.createAttribute=function(){},r.createAttributeNS=function(){},r.createCDATASection=function(){},r.createComment=function(e){return new Ze(null,e)},r.createDocumentFragment=function(){return new tt},r.createElement=function(e){return new We(null,e)},r.createElementNS=function(e){return new We(null,e)},r.createEvent=function(){},r.createNodeIterator=function(){},r.createProcessingInstruction=function(e){return new Qe(null,e)},r.createRange=function(){},r.createTextNode=function(e){return new Ye(null,e)},r.createTouchList=function(){},r.createTreeWalker=function(){},r.serialize=function(){return""+this.childNodes.map((function(e){return e.serialize()})).join("")},Pe(t,[{key:"location",get:function(){return this.location_}},{key:"URL",get:function(){return this.location_.href}},{key:"hidden",get:function(){return!0}},{key:"visibilityState",get:function(){return"prerender"}},{key:"doctype",get:function(){return this.childNodes.find((function(e){return function(e){return e.nodeType===Ue.DOCUMENT_TYPE_NODE}(e)}))}},{key:"head",get:function(){var e=this.documentElement.childNodes.find((function(e){return nt(e)&&"head"===e.nodeName}));return e||(e=new We(this.documentElement,"head"),this.documentElement.append(e)),e}},{key:"body",get:function(){var e=this.childNodes.find((function(e){return nt(e)&&"body"===e.nodeName}));return e||(e=new We(this.documentElement,"body"),this.documentElement.append(e)),e}},{key:"title",get:function(){var e=this.head.childNodes.find((function(e){return nt(e)&&"title"===e.nodeName}));return e?e.innerText:null},set:function(e){var t=this.head.childNodes.find((function(e){return nt(e)&&"title"===e.nodeName}));t||(t=new We(this.head,"title")),t.innerText=e}},{key:"documentElement",get:function(){var e=this.firstElementChild;return e||(e=new We(this,"html")),e}}]),t}(We);function nt(e){return e.nodeType===Ue.ELEMENT_NODE}function ot(e){return e.nodeType===Ue.TEXT_NODE}function st(e){var t,r=new rt,n=r,o=new c.Parser({onopentag:function(e,r){t=new We(n,e,r),n.childNodes.push(t),n=t},onclosetag:function(e){n.parentNode&&(n=n.parentNode)},ontext:function(e){var t=new Ye(n,e);n.childNodes.push(t)},onprocessinginstruction:function(e,r){t="!doctype"===e?new et(n,r):new Qe(n,r),n.childNodes.push(t)},oncomment:function(e){t=new Ze(n,e),n.childNodes.push(t)},oncommentend:function(){}},{decodeEntities:!1,lowerCaseTags:!0});return o.write(e),o.end(),r}function it(e){var t=[];return e.trim().split(" ").forEach((function(e){e.trim().split(">").forEach((function(e,r){for(var n,o=[],s=Ie(e.matchAll(/\:not\(\#([^\.[#:]+)\)|\:not\(\.([^\.[#:]+)\)|\:not\(\[([^\.\[#:]+)\]\)|\:not\(([^\.\[#:\]]+)\)|\#([^\.[#:]+)|\.([^\.[#:]+)|\[([^\.\[#:]+)\]|([^\.\[#:\]]+)/g));!(n=s()).done;){var i=n.value;i[1]?o.push({selector:i[1],type:$e.Id,negate:!0}):i[2]?o.push({selector:i[2],type:$e.Class,negate:!0}):i[3]?o.push({selector:i[3],type:$e.Attribute,negate:!0}):i[4]?o.push({selector:i[4],type:$e.TagName,negate:!0}):i[5]?o.push({selector:i[5],type:$e.Id,negate:!1}):i[6]?o.push({selector:i[6],type:$e.Class,negate:!1}):i[7]?o.push({selector:i[7],type:$e.Attribute,negate:!1}):i[8]&&o.push({selector:i[8],type:$e.TagName,negate:!1})}var a=r>0?{selector:e,selectors:o,inner:!0}:{selector:e,selectors:o,inner:!1};t.push.call(t,a)}))})),t}function at(e,t){return t.reduce((function(t,r){return t&&function(e,t){switch(t.type){case $e.Id:return(""!==t.selector&&e.attributes.id===t.selector)!==t.negate;case $e.Class:return-1!==e.classList.indexOf(t.selector)!==t.negate;case $e.Attribute:return-1!==Object.keys(e.attributes).indexOf(t.selector)!==t.negate;case $e.TagName:return e.nodeName===t.selector!==t.negate;default:return!1}}(e,r)}),!0)}function ut(e,t,r,n){if(void 0===r&&(r=null),void 0===n&&(n=[]),r||e.length){r=r||e.shift();for(var o,s=Ie(t);!(o=s()).done;){var i=o.value;if(i instanceof We)if(at(i,r.selectors))if(e.length){var a=ut(e,i.childNodes);a&&Array.prototype.push.apply(n,a)}else n.push(i);else if(!r.inner){var u=ut(e,i.childNodes,r);u&&Array.prototype.push.apply(n,u)}}}return n.length?n:null}function ct(e,t,r){void 0===r&&(r=null);var n=null;if(r||e.length){r=r||e.shift();for(var o,s=Ie(t);!(o=s()).done;){var i=o.value;if(i instanceof We){if(at(i,r.selectors))return e.length?ct(e,i.childNodes):i;r.inner||(n=ct(e,i.childNodes,r))}}}return n}function lt(e,t,r){var n;if(void 0===t&&(t=!1),void 0===r&&(r=null),nt(e)){var o=new We(r,e.nodeName,Object.assign({},e.attributes));t&&(o.childNodes=e.childNodes.map((function(e){return lt.apply(e,[e,t,o])}))),n=o}else if(e.nodeType===Ue.DOCUMENT_FRAGMENT_NODE){var s=new tt;t&&(s.childNodes=e.childNodes.map((function(e){return lt.apply(e,[e,t,s])}))),n=s}else if(ot(e))n=new Ye(r,e.nodeValue);else if(function(e){return e.nodeType===Ue.COMMENT_NODE}(e))n=new Ze(r,e.nodeValue);else{if(!function(e){return e.nodeType===Ue.DOCUMENT_NODE}(e))throw new Error("Invalid node type");var i=new rt;t&&(i.childNodes=e.childNodes.map((function(e){return lt.apply(e,[e,t,i])}))),n=i}return n}var ht=require("fs"),pt=function(e){e&&Object.assign(this,e),this.vars=Object.assign({host:"http://localhost:5000",port:5e3,charset:"utf8",template:"./index.html",cacheMode:qe.Memory,cache:"./cache/",root:"./dist/browser/"},this.vars||{})},ft=function(e){this.maxAge=3600,this.cacheControl=De.Public,e&&Object.assign(this,e)},dt=function(e){e&&Object.assign(this,e)},yt=function(e){function t(){return e.apply(this,arguments)||this}return je(t,e),t.bootstrap=function(e,t){if(!a.isPlatformServer)throw new a.ModuleError("missing platform server, node process not found");if(!e)throw new a.ModuleError("missing moduleFactory");if(!e.meta)throw new a.ModuleError("missing moduleFactory meta");if(!e.meta.bootstrap)throw new a.ModuleError("missing bootstrap");if(!e.meta.bootstrap.meta)throw new a.ModuleError("missing bootstrap meta");if(!e.meta.bootstrap.meta.selector)throw new a.ModuleError("missing bootstrap meta selector");if(!(null==t?void 0:t.template))throw new a.ModuleError("missing template");var r=this.resolveGlobals(t),n=this.resolveMeta(e);if(n.node instanceof We){var o,s=n.node,i=n.nodeInnerHTML,u={selector:e.meta.bootstrap.meta.selector,innerHTML:i},c=new We(null,"script"),l=new Ye(null,"var rxcomp_hydrate_ = "+JSON.stringify(u)+";");c.append(l),null==(o=s.parentNode)||o.insertBefore(c,s)}var h=new e;h.meta=n,n.imports.forEach((function(e){e.prototype.constructor.call(h)}));var p=h.compile(n.node,{document:r});return h.instances=p,p[0].pushChanges(),h},t.serialize=function(){if(this.document instanceof rt)return this.document.serialize();throw new a.ModuleError("document is not an instance of RxDocument")},t.resolveGlobals=function(e){var t=e.url,r=Ve.location;r.assign(t),global.location=r;var n=Ke.history;n.replaceState(null,"",r.origin),global.history=n;var o=e.template,s="string"==typeof o?st(o):o;return this.document=s,global.document=this.document,n.replaceState(null,s.title||"",r.origin),this.document},t}(a.Platform);function mt(e){return u.Observable.create((function(t){var r=e.vars.template;if(r){var n=Be.get("template",r);console.log("Server.template$.fromCache","path",r,!!n),n&&(t.next(n),t.complete()),ht.readFile(r,e.vars.charset,(function(e,n){e?t.error(e):(Be.set("template",r,n,3600),t.next(n),t.complete())}))}else t.error(new Error("ServerError: missing template"))}))}yt.render$=function(e,t){return u.Observable.create((function(r){var n=new pt(e);n.vars.cacheMode&&(Be.mode=n.vars.cacheMode),n.vars.cache&&(Be.folder=n.vars.cache);var o=Be.get("render",n.url);if(console.log("Server.render$.fromCache","route",n.url,!!o),o)return r.next(o),r.complete();mt(n).pipe(i.switchMap((function(e){return n.template=e,t(n)}))).subscribe((function(e){Be.set("render",n.url,e,e.maxAge,e.cacheControl),r.next(e),r.complete()}),(function(e){r.error(e)}))}))},yt.template$=mt,yt.bootstrap$=function(e,t){return u.Observable.create((function(r){if(!t.template)return r.error(new Error("ServerError: missing template"));try{yt.bootstrap(e,t);r.next(new ft(Object.assign({serialize:function(){return yt.serialize()}},t))),r.complete()}catch(e){r.error(new dt(Object.assign({error:e},t)))}}))};var bt={name:"rxcomp-server",host:"",resource:"/",api:"/api",static:!1,development:!1,production:!0},gt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).items=[],t.error=null,t}je(t,e);var r=t.prototype;return r.onInit=function(){var e=this,t=""+bt.host+bt.api;xe.HttpService.post$(t,{query:"{ getTodos { id, title, completed } }"},{hydrate:!0}).pipe(i.first()).subscribe((function(t){e.items=t.data.getTodos,e.pushChanges()}),(function(e){return console.warn})),a.errors$.pipe(i.takeUntil(this.unsubscribe$)).subscribe((function(t){e.error=t,e.pushChanges()}))},r.onClick=function(e){e.completed=!e.completed,this.pushChanges()},t}(a.Component);gt.meta={selector:"[app-component]"};var vt=function(){function e(){}return e.prototype.intercept=function(e,t){var r=e.clone({url:e.url});return t.handle(r)},e}(),wt=function(e){function t(){return e.apply(this,arguments)||this}return je(t,e),t}(a.Module);wt.meta={imports:[a.CoreModule,xe.HttpModule.useInterceptors([vt])],declarations:[],bootstrap:gt},e.renderRequest$=function(e){return bt.host=e.vars.host,yt.bootstrap$(wt,e).pipe(i.switchMap((function(e){return xe.HttpService.pendingRequests$.pipe(i.filter((function(e){return 0===e})),i.map((function(){return e.body=e.serialize(),e})),i.first())})))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=main.min.js.map