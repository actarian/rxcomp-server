/**
 * @license rxcomp-server v1.0.0-beta.14
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("stream"),require("http"),require("url"),require("https"),require("zlib"),require("rxcomp-http"),require("rxjs/operators"),require("rxcomp"),require("rxjs"),require("htmlparser2")):"function"==typeof define&&define.amd?define(["exports","stream","http","url","https","zlib","rxcomp-http","rxjs/operators","rxcomp","rxjs","htmlparser2"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).main={},t.Stream,t.http,t.Url,t.https,t.zlib,t.rxcomp.http,t.rxjs.operators,t.rxcomp,t.rxjs,t.htmlparser2)}(this,(function(t,e,n,r,o,i,a,s,u,c,l){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var f="default"in s?s.default:s,h="default"in u?u.default:u,p="default"in c?c.default:c,d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}const v=e.Readable,m=Symbol("buffer"),g=Symbol("type");class b{constructor(){this[g]="";const t=arguments[0],e=arguments[1],n=[];let r=0;if(t){const e=t,o=Number(e.length);for(let t=0;t<o;t++){const o=e[t];let i;i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof b?o[m]:Buffer.from("string"==typeof o?o:String(o)),r+=i.length,n.push(i)}}this[m]=Buffer.concat(n);let o=e&&void 0!==e.type&&String(e.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[g]=o)}get size(){return this[m].length}get type(){return this[g]}text(){return Promise.resolve(this[m].toString())}arrayBuffer(){const t=this[m],e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(e)}stream(){const t=new v;return t._read=function(){},t.push(this[m]),t.push(null),t}toString(){return"[object Blob]"}slice(){const t=this.size,e=arguments[0],n=arguments[1];let r,o;r=void 0===e?0:e<0?Math.max(t+e,0):Math.min(e,t),o=void 0===n?t:n<0?Math.max(t+n,0):Math.min(n,t);const i=Math.max(o-r,0),a=this[m].slice(r,r+i),s=new b([],{type:arguments[2]});return s[m]=a,s}}function _(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let w;Object.defineProperties(b.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(b.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),_.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_.prototype.name="FetchError";try{w=require("encoding").convert}catch(t){}const O=Symbol("Body internals"),x=e.PassThrough;function S(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let i=void 0===o?0:o;var a=r.timeout;let s=void 0===a?0:a;null==t?t=null:N(t)?t=Buffer.from(t.toString()):P(t)||Buffer.isBuffer(t)||("[object ArrayBuffer]"===Object.prototype.toString.call(t)?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof e||(t=Buffer.from(String(t)))),this[O]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=s,t instanceof e&&t.on("error",(function(t){const e="AbortError"===t.name?t:new _(`Invalid response body while trying to fetch ${n.url}: ${t.message}`,"system",t);n[O].error=e}))}function E(){var t=this;if(this[O].disturbed)return S.Promise.reject(new TypeError("body used already for: "+this.url));if(this[O].disturbed=!0,this[O].error)return S.Promise.reject(this[O].error);let n=this.body;if(null===n)return S.Promise.resolve(Buffer.alloc(0));if(P(n)&&(n=n.stream()),Buffer.isBuffer(n))return S.Promise.resolve(n);if(!(n instanceof e))return S.Promise.resolve(Buffer.alloc(0));let r=[],o=0,i=!1;return new S.Promise((function(e,a){let s;t.timeout&&(s=setTimeout((function(){i=!0,a(new _(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))}),t.timeout)),n.on("error",(function(e){"AbortError"===e.name?(i=!0,a(e)):a(new _(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e))})),n.on("data",(function(e){if(!i&&null!==e){if(t.size&&o+e.length>t.size)return i=!0,void a(new _(`content size at ${t.url} over limit: ${t.size}`,"max-size"));o+=e.length,r.push(e)}})),n.on("end",(function(){if(!i){clearTimeout(s);try{e(Buffer.concat(r,o))}catch(e){a(new _(`Could not create Buffer from response body for ${t.url}: ${e.message}`,"system",e))}}}))}))}function N(t){return"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&("URLSearchParams"===t.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(t)||"function"==typeof t.sort)}function P(t){return"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.constructor&&"string"==typeof t.constructor.name&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function C(t){let n,r,o=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof e&&"function"!=typeof o.getBoundary&&(n=new x,r=new x,o.pipe(n),o.pipe(r),t[O].body=n,o=r),o}function j(t){return null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":N(t)?"application/x-www-form-urlencoded;charset=UTF-8":P(t)?t.type||null:Buffer.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)||ArrayBuffer.isView(t)?null:"function"==typeof t.getBoundary?"multipart/form-data;boundary="+t.getBoundary():t instanceof e?null:"text/plain;charset=UTF-8"}function T(t){const e=t.body;return null===e?0:P(e)?e.size:Buffer.isBuffer(e)?e.length:e&&"function"==typeof e.getLengthSync&&(e._lengthRetrievers&&0==e._lengthRetrievers.length||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}S.prototype={get body(){return this[O].body},get bodyUsed(){return this[O].disturbed},arrayBuffer(){return E.call(this).then((function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}))},blob(){let t=this.headers&&this.headers.get("content-type")||"";return E.call(this).then((function(e){return Object.assign(new b([],{type:t.toLowerCase()}),{[m]:e})}))},json(){var t=this;return E.call(this).then((function(e){try{return JSON.parse(e.toString())}catch(e){return S.Promise.reject(new _(`invalid json response body at ${t.url} reason: ${e.message}`,"invalid-json"))}}))},text(){return E.call(this).then((function(t){return t.toString()}))},buffer(){return E.call(this)},textConverted(){var t=this;return E.call(this).then((function(e){return function(t,e){if("function"!=typeof w)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=e.get("content-type");let r,o,i="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));o=t.slice(0,1024).toString(),!r&&o&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!r&&o&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),r&&(r=/charset=(.*)/i.exec(r.pop())));!r&&o&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));r&&(i=r.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030"));return w(t,"UTF-8",i).toString()}(e,t.headers)}))}},Object.defineProperties(S.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),S.mixIn=function(t){for(const e of Object.getOwnPropertyNames(S.prototype))if(!(e in t)){const n=Object.getOwnPropertyDescriptor(S.prototype,e);Object.defineProperty(t,e,n)}},S.Promise=global.Promise;const R=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,k=/[^\t\x20-\x7e\x80-\xff]/;function A(t){if(t=""+t,R.test(t)||""===t)throw new TypeError(t+" is not a legal HTTP header name")}function L(t){if(t=""+t,k.test(t))throw new TypeError(t+" is not a legal HTTP header value")}function M(t,e){e=e.toLowerCase();for(const n in t)if(n.toLowerCase()===e)return n}const $=Symbol("map");class D{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[$]=Object.create(null),t instanceof D){const e=t.raw(),n=Object.keys(e);for(const t of n)for(const n of e[t])this.append(t,n)}else if(null==t);else{if("object"!=typeof t)throw new TypeError("Provided initializer must be an object");{const e=t[Symbol.iterator];if(null!=e){if("function"!=typeof e)throw new TypeError("Header pairs must be iterable");const n=[];for(const e of t){if("object"!=typeof e||"function"!=typeof e[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(e))}for(const t of n){if(2!==t.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(t[0],t[1])}}else for(const e of Object.keys(t)){const n=t[e];this.append(e,n)}}}}get(t){A(t=""+t);const e=M(this[$],t);return void 0===e?null:this[$][e].join(", ")}forEach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=z(this),r=0;for(;r<n.length;){var o=n[r];const i=o[0],a=o[1];t.call(e,a,i,this),n=z(this),r++}}set(t,e){e=""+e,A(t=""+t),L(e);const n=M(this[$],t);this[$][void 0!==n?n:t]=[e]}append(t,e){e=""+e,A(t=""+t),L(e);const n=M(this[$],t);void 0!==n?this[$][n].push(e):this[$][t]=[e]}has(t){return A(t=""+t),void 0!==M(this[$],t)}delete(t){A(t=""+t);const e=M(this[$],t);void 0!==e&&delete this[$][e]}raw(){return this[$]}keys(){return U(this,"key")}values(){return U(this,"value")}[Symbol.iterator](){return U(this,"key+value")}}function z(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const n=Object.keys(t[$]).sort();return n.map("key"===e?function(t){return t.toLowerCase()}:"value"===e?function(e){return t[$][e].join(", ")}:function(e){return[e.toLowerCase(),t[$][e].join(", ")]})}D.prototype.entries=D.prototype[Symbol.iterator],Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(D.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const I=Symbol("internal");function U(t,e){const n=Object.create(F);return n[I]={target:t,kind:e,index:0},n}const F=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==F)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[I];const e=t.target,n=t.kind,r=t.index,o=z(e,n);return r>=o.length?{value:void 0,done:!0}:(this[I].index=r+1,{value:o[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function B(t){const e=Object.assign({__proto__:null},t[$]),n=M(t[$],"Host");return void 0!==n&&(e[n]=e[n][0]),e}Object.defineProperty(F,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const q=Symbol("Response internals"),H=n.STATUS_CODES;class G{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.call(this,t,e);const n=e.status||200,r=new D(e.headers);if(null!=t&&!r.has("Content-Type")){const e=j(t);e&&r.append("Content-Type",e)}this[q]={url:e.url,status:n,statusText:e.statusText||H[n],headers:r,counter:e.counter}}get url(){return this[q].url||""}get status(){return this[q].status}get ok(){return this[q].status>=200&&this[q].status<300}get redirected(){return this[q].counter>0}get statusText(){return this[q].statusText}get headers(){return this[q].headers}clone(){return new G(C(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}S.mixIn(G.prototype),Object.defineProperties(G.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(G.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const V=Symbol("Request internals"),Y=r.parse,J=r.format,K="destroy"in e.Readable.prototype;function W(t){return"object"==typeof t&&"object"==typeof t[V]}class X{constructor(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(t)?e=Y(t.url):(e=t&&t.href?Y(t.href):Y(""+t),t={});let r=n.method||t.method||"GET";if(r=r.toUpperCase(),(null!=n.body||W(t)&&null!==t.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=n.body?n.body:W(t)&&null!==t.body?C(t):null;S.call(this,o,{timeout:n.timeout||t.timeout||0,size:n.size||t.size||0});const i=new D(n.headers||t.headers||{});if(null!=o&&!i.has("Content-Type")){const t=j(o);t&&i.append("Content-Type",t)}let a=W(t)?t.signal:null;if("signal"in n&&(a=n.signal),null!=a&&!function(t){const e=t&&"object"==typeof t&&Object.getPrototypeOf(t);return!(!e||"AbortSignal"!==e.constructor.name)}(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[V]={method:r,redirect:n.redirect||t.redirect||"follow",headers:i,parsedURL:e,signal:a},this.follow=void 0!==n.follow?n.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===t.compress||t.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent}get method(){return this[V].method}get url(){return J(this[V].parsedURL)}get headers(){return this[V].headers}get redirect(){return this[V].redirect}get signal(){return this[V].signal}clone(){return new X(this)}}function Z(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}S.mixIn(X.prototype),Object.defineProperty(X.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(X.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z.prototype.name="AbortError";const Q=e.PassThrough,tt=r.resolve;function et(t,r){if(!et.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return S.Promise=et.Promise,new et.Promise((function(a,s){const u=new X(t,r),c=function(t){const n=t[V].parsedURL,r=new D(t[V].headers);if(r.has("Accept")||r.set("Accept","*/*"),!n.protocol||!n.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(n.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof e.Readable&&!K)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==t.body&&/^(POST|PUT)$/i.test(t.method)&&(o="0"),null!=t.body){const e=T(t);"number"==typeof e&&(o=String(e))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return"function"==typeof i&&(i=i(n)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},n,{method:t.method,headers:B(r),agent:i})}(u),l=("https:"===c.protocol?o:n).request,f=u.signal;let h=null;const p=function(){let t=new Z("The user aborted a request.");s(t),u.body&&u.body instanceof e.Readable&&u.body.destroy(t),h&&h.body&&h.body.emit("error",t)};if(f&&f.aborted)return void p();const d=function(){p(),m()},y=l(c);let v;function m(){y.abort(),f&&f.removeEventListener("abort",d),clearTimeout(v)}f&&f.addEventListener("abort",d),u.timeout&&y.once("socket",(function(t){v=setTimeout((function(){s(new _("network timeout at: "+u.url,"request-timeout")),m()}),u.timeout)})),y.on("error",(function(t){s(new _(`request to ${u.url} failed, reason: ${t.message}`,"system",t)),m()})),y.on("response",(function(t){clearTimeout(v);const e=function(t){const e=new D;for(const n of Object.keys(t))if(!R.test(n))if(Array.isArray(t[n]))for(const r of t[n])k.test(r)||(void 0===e[$][n]?e[$][n]=[r]:e[$][n].push(r));else k.test(t[n])||(e[$][n]=[t[n]]);return e}(t.headers);if(et.isRedirect(t.statusCode)){const n=e.get("Location"),r=null===n?null:tt(u.url,n);switch(u.redirect){case"error":return s(new _("redirect mode is set to error: "+u.url,"no-redirect")),void m();case"manual":if(null!==r)try{e.set("Location",r)}catch(t){s(t)}break;case"follow":if(null===r)break;if(u.counter>=u.follow)return s(new _("maximum redirect reached at: "+u.url,"max-redirect")),void m();const n={headers:new D(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:u.body,signal:u.signal,timeout:u.timeout};return 303!==t.statusCode&&u.body&&null===T(u)?(s(new _("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void m()):(303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==u.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),a(et(new X(r,n))),void m())}}t.once("end",(function(){f&&f.removeEventListener("abort",d)}));let n=t.pipe(new Q);const r={url:u.url,status:t.statusCode,statusText:t.statusMessage,headers:e,size:u.size,timeout:u.timeout,counter:u.counter},o=e.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===o||204===t.statusCode||304===t.statusCode)return h=new G(n,r),void a(h);const c={flush:i.Z_SYNC_FLUSH,finishFlush:i.Z_SYNC_FLUSH};if("gzip"==o||"x-gzip"==o)return n=n.pipe(i.createGunzip(c)),h=new G(n,r),void a(h);if("deflate"!=o&&"x-deflate"!=o){if("br"==o&&"function"==typeof i.createBrotliDecompress)return n=n.pipe(i.createBrotliDecompress()),h=new G(n,r),void a(h);h=new G(n,r),a(h)}else{t.pipe(new Q).once("data",(function(t){n=8==(15&t[0])?n.pipe(i.createInflate()):n.pipe(i.createInflateRaw()),h=new G(n,r),a(h)}))}})),function(t,e){const n=e.body;null===n?t.end():P(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}(y,u)}))}et.isRedirect=function(t){return 301===t||302===t||303===t||307===t||308===t},et.Promise=global.Promise;var nt,rt=(nt=Object.freeze({__proto__:null,default:et,Headers:D,Request:X,Response:G,FetchError:_}))&&nt.default||nt,ot=y((function(t,e){var n=rt.default||rt,r=function(t,e){return/^\/\//.test(t)&&(t="https:"+t),n.call(this,t,e)};t.exports=e=r,e.fetch=r,e.Headers=rt.Headers,e.Request=rt.Request,e.Response=rt.Response,e.default=r})),it=ot.fetch.bind({});function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),t}function ut(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ht(t,e,n){return(ht=ft()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&lt(o,n.prototype),o}).apply(null,arguments)}function pt(t){var e="function"==typeof Map?new Map:void 0;return(pt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ht(t,arguments,ct(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),lt(r,t)})(t)}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}it.polyfill=!0,d.fetch||(d.fetch=it,d.Response=ot.Response,d.Headers=ot.Headers,d.Request=ot.Request);var mt,gt,bt=require("path"),_t=require("fs"),wt=function(){function t(){}return t.exists=function(t){return _t.existsSync(t)},t.exists$=function(t){return c.Observable.create((function(e){try{_t.access(t,_t.constants.F_OK,(function(t){var n=!t;e.next(n),e.complete()}))}catch(t){console.log("FileService.exists$.error",t),e.next(!1),e.complete()}}))},t.readFile=function(t){var e=bt.dirname(t);return _t.existsSync(e)?_t.readFileSync(t,"utf8"):null},t.readFile$=function(t){return c.Observable.create((function(e){try{_t.readFile(t,"utf8",(function(t,n){e.next(t?null:n),e.complete()}))}catch(t){console.log("FileService.readFile$.error",t),e.next(null),e.complete()}}))},t.writeFile=function(t,e){try{var n=bt.dirname(t);return _t.existsSync(n)||_t.mkdirSync(n),_t.writeFileSync(t,e,"utf8"),!0}catch(t){return console.log("FileService.writeFile.error",t),!1}},t.writeFile$=function(t,e){return c.Observable.create((function(n){try{var r=bt.dirname(t);_t.mkdir(r,{recursive:!0},(function(r){if(r)return n.next(!1),void n.complete();_t.writeFile(t,e,"utf8",(function(t){n.next(!t),n.complete()}))}))}catch(t){console.log("FileService.writeFile$.error",t),n.next(!1),n.complete()}}))},t.unlinkFile=function(t){try{return!!_t.existsSync(t)&&(_t.unlinkSync(t),!0)}catch(t){return console.log("FileService.unlinkFile.error",t),!1}},t.unlinkFile$=function(t){return c.Observable.create((function(e){try{_t.unlink(t,(function(t){e.next(!t),e.complete()}))}catch(t){console.log("FileService.unlinkFile$.error",t),e.next(!1)}}))},t}();!function(t){t.Memory="memory",t.File="file"}(mt||(mt={})),function(t){t.Public="public",t.Private="private",t.NoCache="no-cache",t.NoStore="no-store"}(gt||(gt={}));var Ot=function(){function t(t){this.date=new Date,this.maxAge=0,this.cacheControl=gt.Public,t&&(this.value=t.value,this.date=t.date?new Date(t.date):this.date,this.maxAge=t.maxAge||this.maxAge,this.cacheControl=t.cacheControl||this.cacheControl)}return t.toData=function(t){return u.Serializer.encode(t,[u.encodeJson])},t.fromData=function(e){return new t(u.Serializer.decode(e,[u.decodeJson]))},st(t,[{key:"expired",get:function(){return this.cacheControl===gt.NoStore||0===this.maxAge||this.date.getTime()+1e3*this.maxAge<Date.now()}}]),t}(),xt=function(){function t(){}return t.has=function(t,e){void 0===t&&(t="cache");var n=!1;try{var r=this.getPath(t,e);switch(this.mode){case mt.File:n=wt.exists(r);break;case mt.Memory:default:n=-1!==Object.keys(this.cache_).indexOf(r)}}catch(t){console.log("CacheService.has.error",t)}return n},t.get=function(t,e){void 0===t&&(t="cache");var n,r=null;try{var o=this.getPath(t,e);switch(this.mode){case mt.File:if(wt.exists(o)){var i,a=wt.readFile(o);if(a)if((n=Ot.fromData(a)).expired)wt.unlinkFile(o);else r=null==(i=n)?void 0:i.value}break;case mt.Memory:default:if(-1!==Object.keys(this.cache_).indexOf(o)){var s=this.cache_[o];s&&(n=Ot.fromData(s))&&(n.expired?delete this.cache_[o]:r=n.value)}}}catch(t){console.log("CacheService.get.error",t)}return r},t.set=function(t,e,n,r,o){void 0===t&&(t="cache"),void 0===r&&(r=0),void 0===o&&(o=gt.Public);try{var i,a=this.getPath(t,e),s=new Ot({value:n,maxAge:r,cacheControl:o});switch(this.mode){case mt.File:(i=Ot.toData(s))&&wt.writeFile(a,i);break;case mt.Memory:default:(i=Ot.toData(s))&&(this.cache_[a]=i)}}catch(t){console.log("CacheService.set.error",t)}return n},t.delete=function(t,e){void 0===t&&(t="cache");try{var n=this.getPath(t,e);switch(this.mode){case mt.File:wt.unlinkFile(n);break;case mt.Memory:default:-1!==Object.keys(this.cache_).indexOf(n)&&delete this.cache_[n]}}catch(t){console.log("CacheService.delete.error",t)}},t.has$=function(t,e){var n=this;return void 0===t&&(t="cache"),c.Observable.create((function(r){var o=n.getPath(t,e);r.next(o),r.complete()})).pipe(s.switchMap((function(t){return n.mode===mt.File?wt.exists$(t):c.of(-1!==Object.keys(n.cache_).indexOf(t))})))},t.get$=function(t,e){var n,r=this;return void 0===t&&(t="cache"),c.Observable.create((function(o){n=r.getPath(t,e),o.next(n),o.complete()})).pipe(s.switchMap((function(t){return r.mode===mt.File?wt.readFile$(t):c.of(r.cache_[t])})),s.switchMap((function(t){var e=t?Ot.fromData(t):null;return e&&e.expired?wt.unlinkFile$(n).pipe(s.map((function(){return null}))):c.of(e?e.value:null)})))},t.set$=function(t,e,n,r,o){var i,a,u,l=this;return void 0===t&&(t="cache"),void 0===r&&(r=0),void 0===o&&(o=gt.Public),c.Observable.create((function(s){i=l.getPath(t,e),a=new Ot({value:n,maxAge:r,cacheControl:o}),u=Ot.toData(a),s.next(u),s.complete()})).pipe(s.switchMap((function(t){return t?l.mode===mt.File?wt.writeFile$(i,t):(l.cache_[i]=t,c.of(!0)):c.of(!1)})))},t.delete$=function(t,e){var n,r=this;return void 0===t&&(t="cache"),c.Observable.create((function(o){n=r.getPath(t,e),o.next(n),o.complete()})).pipe(s.switchMap((function(t){return r.mode===mt.File?wt.unlinkFile$(t):-1!==Object.keys(r.cache_).indexOf(t)?(delete r.cache_[t],c.of(!0)):c.of(!1)})))},t.getPath=function(t,e){void 0===t&&(t="cache");var n=this.getKey(t,e);return""+this.folder+n},t.getKey=function(t,e){void 0===t&&(t="cache");var n=(t+"-"+e).toLowerCase();return n=n.replace(/(\s+)|(\W+)/g,(function(){return(arguments.length<=1?void 0:arguments[1])?"":"_"}))},t}();xt.cache_={},xt.mode=mt.Memory;var St,Et,Nt=function(t){function e(){return t.apply(this,arguments)||this}ut(e,t);var n=e.prototype;return n.contains=function(t){return-1!==this.indexOf(t)},n.item=function(t){return t>0&&t<this.length?this[t]:null},e}(pt(Array)),Pt=function(){function t(){this.hash_="",this.host_="",this.hostname_="",this.pathname_="",this.port_="",this.protocol_="",this.search_="",this.href_="",this.ancestorOrigins_=new Nt}var e=t.prototype;return e.assign=function(t){this.href=t},e.reload=function(){},e.replace=function(t){this.href=t},e.toString=function(){return this.href},st(t,[{key:"hash",get:function(){return this.hash_},set:function(t){this.hash_=t,this.href=this.href}},{key:"host",get:function(){return this.host_},set:function(t){this.host_=t,this.href=this.href}},{key:"hostname",get:function(){return this.hostname_},set:function(t){this.hostname_=t,this.href=this.href}},{key:"pathname",get:function(){return this.pathname_},set:function(t){this.pathname_=t,this.href=this.href}},{key:"port",get:function(){return this.port_},set:function(t){this.port_=t,this.href=this.href}},{key:"protocol",get:function(){return this.protocol_},set:function(t){this.protocol_=t,this.href=this.href}},{key:"search",get:function(){return this.search_},set:function(t){this.search_=t,this.href=this.href}},{key:"href",get:function(){var t=this.protocol+"//"+this.host+(this.port.length?":"+this.port:"")+this.pathname+this.search+this.hash;return this.href_=t,t},set:function(t){if(this.href_!==t){this.href_=t;var e=u.getLocationComponents(t);this.protocol_=e.protocol,this.host_=e.host,this.hostname_=e.hostname,this.port_=e.port,this.pathname_=e.pathname,this.search_=e.search,this.hash_=e.hash}}},{key:"origin",get:function(){return this.protocol+"//"+this.host+(this.port.length?":"+this.port:"")}},{key:"ancestorOrigins",get:function(){return this.ancestorOrigins_}}],[{key:"location",get:function(){return this.location_?this.location_:this.location_=new t}}]),t}(),Ct=function(){function t(){this.currentIndex_=0,this.history_=[],this.scrollRestoration="auto"}var e=t.prototype;return e.back=function(){if(this.currentIndex_>0){this.currentIndex_--;var t=this.history_[this.currentIndex_];t.url&&(Pt.location.href=t.url)}},e.forward=function(){if(this.currentIndex_<this.history_.length-1){this.currentIndex_++;var t=this.history_[this.currentIndex_];t.url&&(Pt.location.href=t.url)}},e.go=function(t){if("number"==typeof t){var e=this.currentIndex_+t;if(e>0&&e<this.history_.length){var n=this.history_[e];n.url&&(Pt.location.href=n.url)}}},e.pushState=function(t,e,n){this.history_.push({data:t,title:e,url:n}),this.currentIndex_=this.history_.length-1},e.replaceState=function(t,e,n){this.history_.length?this.history_.splice(this.history_.length-1,1,{data:t,title:e,url:n}):this.history_.push({data:t,title:e,url:n}),this.currentIndex_=this.history_.length-1},st(t,[{key:"length",get:function(){return this.history_.length}}],[{key:"history",get:function(){return this.history_?this.history_:this.history_=new t}}]),t}();!function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(St||(St={})),function(t){t[t.None=-1]="None",t[t.Id=0]="Id",t[t.Class=1]="Class",t[t.Attribute=2]="Attribute",t[t.TagName=3]="TagName"}(Et||(Et={}));var jt=function(){function t(t){void 0===t&&(t=null),this.nodeValue=null,this.parentNode=t,this.nodeType=-1}var e=t.prototype;return e.cloneNode=function(t){return void 0===t&&(t=!1),Jt.apply(this,[this,t])},e.serialize=function(){return""},t}(),Tt=function(){function t(t){Object.defineProperty(this,"node",{value:t,writable:!1,enumerable:!1}),this.init()}var e=t.prototype;return e.init=function(){var t,e=this;if(Object.keys(this).forEach((function(t){return delete e[t]})),null==(t=this.node.attributes)?void 0:t.style){[].concat(this.node.attributes.style.matchAll(/([^:]+):([^;]+);?\s*/gm)).forEach((function(t){var n=t[1],r=t[2];e[n]=r}))}},e.item=function(t){var e=Object.keys(this);return e.length>t?e[t]:void 0},e.getPropertyPriority=function(t){var e=this[t];return e&&e.indexOf("!important")?"important":""},e.getPropertyValue=function(t){return this[t]},e.setProperty=function(t,e,n){this[t]=e+("important"===n?"!important":""),this.serialize_()},e.removeProperty=function(t){delete this[t],this.serialize_()},e.serialize_=function(){var t=this;this.node.attributes.style=Object.keys(this).map((function(e){return e+": "+t[e]+";"})).join(" ")},t}(),Rt=function(t){function e(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.call.apply(t,[this].concat(n))||this}ut(e,t);var n=e.prototype;return n.init=function(){this.length=0,this.node.hasAttribute("class")&&Array.prototype.push.apply(this,this.node.getAttribute("class").split(" ").map((function(t){return t.trim()})))},n.slice=function(t,n){var r=this.length;t=(t=t||0)>=0?t:Math.max(0,r+t);var o,i=(n=(n=void 0!==n?n:r)>=0?Math.min(n,r):r+n)-t,a=i>0?new e(i):new e;for(o=0;o<i;o++)a[o]=this[t+o];return a.node=this.node,a},n.item=function(t){return this[t]},n.contains=function(t){return-1!==this.indexOf(t)},n.add=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this.serialize_()},n.remove=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)})),this.serialize_()},n.toggle=function(t,e){var n=this.indexOf(t);return!1===e?(this.splice(n,1),this.serialize_(),!1):!0===e?(this.push(t),this.serialize_(),!0):-1!==n?(this.splice(n,1),this.serialize_(),!1):(this.push(t),this.serialize_(),!0)},n.replace=function(t,e){var n=this.indexOf(t);-1!==n&&this.splice(n,1),this.push(e),this.serialize_()},n.serialize_=function(){this.node.setAttribute("class",this.join(" "))},st(e,[{key:"node",get:function(){return this.node_},set:function(t){this.node_!==t&&(this.node_=t,this.init())}}]),e}(pt(Array)),kt=function(t){function e(e,n,r){var o;void 0===e&&(e=null),void 0===r&&(r=null),(o=t.call(this,e)||this).attributes={},o.nodeType=St.ELEMENT_NODE,o.nodeName=n,r&&"object"==typeof r&&(o.attributes=r),o.style=new Tt(dt(o));var i=new Rt;return i.node=dt(o),o.classList=i,o.childNodes=[],o}ut(e,t);var n=e.prototype;return n.append=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n=n.map((function(e){var n;return"string"==typeof e?n=new At(t,e):(n=e).parentNode=t,n})),Array.prototype.push.apply(this.childNodes,n)},n.appendChild=function(t){return t.parentNode&&t.parentNode.removeChild(t),Bt(t)?this.append.apply(this,t.childNodes):this.append(t),t},n.prepend=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n=n.map((function(e){var n;return"string"==typeof e?n=new At(t,e):(n=e).parentNode=t,n})),Array.prototype.unshift.apply(this.childNodes,n)},n.replaceChildren=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.map((function(e){var n;return"string"==typeof e?n=new At(t,e):(n=e).parentNode=t,n}));this.childNodes=o},n.querySelectorAll=function(t){var e=Vt(Ht(t),this.childNodes);return e&&e.length?e:null},n.querySelector=function(t){return Yt(Ht(t),this.childNodes)},n.hasAttribute=function(t){return-1!==Object.keys(this.attributes).indexOf(t.toLowerCase())},n.getAttribute=function(t){return this.attributes[t.toLowerCase()]||null},n.setAttribute=function(t,e){this.attributes[t.toLowerCase()]=e.toString(),"style"===t?this.style.init():"class"===t&&this.classList.init()},n.removeAttribute=function(t){delete this.attributes[t],"style"===t?this.style.init():"class"===t&&this.classList.init()},n.replaceChild=function(t,e){var n=this.childNodes.indexOf(e);return-1!==n&&(this.childNodes[n]=t,t.parentNode=this),e},n.removeChild=function(t){if(!(t instanceof jt))throw new Error("Uncaught TypeError: Failed to execute 'removeChild' on 'Node': parameter 1 is not of type 'Node'.");var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Uncaught NotFoundError: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.");return this.childNodes.splice(e,1),t},n.insertBefore=function(t,e){void 0===e&&(e=null);var n=e?this.childNodes.indexOf(e):this.childNodes.length;return-1!==n&&(this.childNodes.splice(n,0,t),t.parentNode=this),t},n.cloneNode=function(t){return void 0===t&&(t=!1),Jt.apply(this,[this,t])},n.addListener=function(t,e){},n.removeListener=function(t,e){},n.serialize=function(){return"<"+this.nodeName+this.serializeAttributes()+">"+this.childNodes.map((function(t){return t.serialize()})).join("")+"</"+this.nodeName+">"},n.serializeAttributes=function(){var t=this,e="",n=Object.keys(this.attributes);return n.length&&(e=" "+n.map((function(e){return e+'="'+t.attributes[e]+'"'})).join(" ")),e},st(e,[{key:"children",get:function(){var t,e=[],n=0,r=this.childNodes;for(t=r[n++];t;)t.nodeType===St.ELEMENT_NODE&&e.push(t),t=r[n++];return e}},{key:"childElementCount",get:function(){var t,e=0,n=0,r=this.childNodes;for(t=r[e++];t;)t.nodeType===St.ELEMENT_NODE&&n++,t=r[e++];return n}},{key:"firstChild",get:function(){var t=null;return this.childNodes.length&&(t=this.childNodes[0]),t}},{key:"firstElementChild",get:function(){for(var t,e=vt(this.childNodes);!(t=e()).done;){var n=t.value;if(Ut(n))return n}return null}},{key:"lastChild",get:function(){var t=null;return this.childNodes.length&&(t=this.childNodes[this.childNodes.length-1]),t}},{key:"lastElementChild",get:function(){for(var t=this.childNodes,e=t.length-1;e>-1;e--){var n=t[e];if(Ut(n))return n}return null}},{key:"previousSibling",get:function(){var t=null;if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);e>0&&(t=this.parentNode.childNodes[e-1])}return t}},{key:"nextSibling",get:function(){var t=null;if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);-1!==e&&e<this.parentNode.childNodes.length-1&&(t=this.parentNode.childNodes[e])}return t}},{key:"wholeText",get:function(){if(this.nodeType===St.TEXT_NODE)return this.nodeValue}},{key:"outerHTML",get:function(){var t=null;return this.parentNode&&(t=this.parentNode.serialize()),t}},{key:"innerText",set:function(t){this.childNodes=[new At(this,t)]},get:function(){return this.childNodes.filter((function(t){return Ft(t)||Ut(t)})).map((function(t){return t.innerText})).join("")}},{key:"textContent",set:function(t){this.innerText=String(t)},get:function(){return this.innerText}},{key:"innerHTML",get:function(){return this.childNodes.map((function(t){return t.serialize()})).join("")},set:function(t){var e=this,n=qt(t).childNodes.map((function(t){return t.parentNode=e,t}));this.childNodes=n}}]),e}(jt),At=function(t){function e(e,n){var r;return void 0===e&&(e=null),(r=t.call(this,e)||this).nodeType=St.TEXT_NODE,r.nodeValue=String(n),r}return ut(e,t),e.prototype.serialize=function(){return this.nodeValue},st(e,[{key:"outerHTML",get:function(){var t=null;return this.parentNode&&(t=this.parentNode.serialize()),t}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(t){this.nodeValue=String(t)},get:function(){return this.nodeValue}},{key:"textContent",set:function(t){this.nodeValue=String(t)},get:function(){return this.nodeValue}}]),e}(jt),Lt=function(t){function e(e,n){var r;return void 0===e&&(e=null),(r=t.call(this,e)||this).nodeType=St.COMMENT_NODE,r.nodeValue=String(n),r}return ut(e,t),e.prototype.serialize=function(){return"\x3c!--"+this.nodeValue+"--\x3e"},st(e,[{key:"outerHTML",get:function(){var t=null;return this.parentNode&&(t=this.parentNode.serialize()),t}},{key:"wholeText",get:function(){return this.nodeValue}},{key:"innerText",set:function(t){this.nodeValue=String(t)},get:function(){return this.nodeValue}},{key:"textContent",set:function(t){this.nodeValue=String(t)},get:function(){return this.nodeValue}}]),e}(jt),Mt=function(t){function e(e,n){var r;return void 0===e&&(e=null),(r=t.call(this,e)||this).nodeType=St.PROCESSING_INSTRUCTION_NODE,r.nodeValue=String(n),r}return ut(e,t),e.prototype.serialize=function(){return"<"+this.nodeValue+">"},e}(jt),$t=function(t){function e(e,n){var r;return void 0===e&&(e=null),(r=t.call(this,e)||this).nodeType=St.DOCUMENT_TYPE_NODE,r.nodeValue=String(n),r}return ut(e,t),e.prototype.serialize=function(){return"<"+this.nodeValue+">"},e}(jt),Dt=function(t){function e(){var e;return(e=t.call(this,null,"#document-fragment")||this).nodeType=St.DOCUMENT_FRAGMENT_NODE,e.childNodes=[],e}return ut(e,t),e}(kt),zt=function(t){function e(){var e;return(e=t.call(this,null,"#document")||this).location_=Pt.location,e.nodeType=St.DOCUMENT_NODE,e.childNodes=[],e}ut(e,t);var n=e.prototype;return n.createAttribute=function(){},n.createAttributeNS=function(){},n.createCDATASection=function(){},n.createComment=function(t){return new Lt(null,t)},n.createDocumentFragment=function(){return new Dt},n.createElement=function(t){return new kt(null,t)},n.createElementNS=function(t){return new kt(null,t)},n.createEvent=function(){},n.createNodeIterator=function(){},n.createProcessingInstruction=function(t){return new Mt(null,t)},n.createRange=function(){},n.createTextNode=function(t){return new At(null,t)},n.createTouchList=function(){},n.createTreeWalker=function(){},n.serialize=function(){return""+this.childNodes.map((function(t){return t.serialize()})).join("")},st(e,[{key:"location",get:function(){return this.location_}},{key:"URL",get:function(){return this.location_.href}},{key:"hidden",get:function(){return!0}},{key:"visibilityState",get:function(){return"prerender"}},{key:"doctype",get:function(){return this.childNodes.find((function(t){return function(t){return t.nodeType===St.DOCUMENT_TYPE_NODE}(t)}))}},{key:"head",get:function(){var t=this.documentElement.childNodes.find((function(t){return Ut(t)&&"head"===t.nodeName}));return t||(t=new kt(this.documentElement,"head"),this.documentElement.append(t)),t}},{key:"body",get:function(){var t=this.childNodes.find((function(t){return Ut(t)&&"body"===t.nodeName}));return t||(t=new kt(this.documentElement,"body"),this.documentElement.append(t)),t}},{key:"title",get:function(){var t=this.head.childNodes.find((function(t){return Ut(t)&&"title"===t.nodeName}));return t?t.innerText:null},set:function(t){var e=this.head.childNodes.find((function(t){return Ut(t)&&"title"===t.nodeName}));e||(e=new kt(this.head,"title")),e.innerText=t}},{key:"documentElement",get:function(){var t=this.firstElementChild;return t||(t=new kt(this,"html")),t}}]),e}(kt),It=function(){function t(t){t&&Object.assign(this,t)}var e=t.prototype;return e.alert=function(t){},e.blur=function(){},e.close=function(){},e.confirm=function(t){return!1},e.departFocus=function(t,e){},e.focus=function(){},e.getComputedStyle=function(t,e){},e.getMatchedCSSRules=function(t,e){},e.getSelection=function(){return null},e.matchMedia=function(t){},e.moveBy=function(t,e){},e.moveTo=function(t,e){},e.msWriteProfilerMark=function(t){},e.open=function(t,e,n,r){return null},e.postMessage=function(t,e,n){},e.print=function(){},e.prompt=function(t,e){return null},e.resizeBy=function(t,e){},e.resizeTo=function(t,e){},e.scroll=function(){},e.scrollBy=function(){},e.scrollTo=function(){},e.stop=function(){},e.webkitCancelAnimationFrame=function(t){},e.webkitConvertPointFromNodeToPage=function(t,e){},e.webkitConvertPointFromPageToNode=function(t,e){},e.webkitRequestAnimationFrame=function(t){return 0},e.addEventListener=function(t,e,n){},e.removeEventListener=function(t,e,n){},e.oncompassneedscalibration=function(t){return null},e.ondevicelight=function(t){return null},e.ondevicemotion=function(t){},e.ondeviceorientation=function(t){},e.ondeviceorientationabsolute=function(t){},e.onmousewheel=function(t){},e.onmsgesturechange=function(t){},e.onmsgesturedoubletap=function(t){},e.onmsgestureend=function(t){},e.onmsgesturehold=function(t){},e.onmsgesturestart=function(t){},e.onmsgesturetap=function(t){},e.onmsinertiastart=function(t){},e.onmspointercancel=function(t){},e.onmspointerdown=function(t){},e.onmspointerenter=function(t){},e.onmspointerleave=function(t){},e.onmspointermove=function(t){},e.onmspointerout=function(t){},e.onmspointerover=function(t){},e.onmspointerup=function(t){},e.onreadystatechange=function(t){},e.onvrdisplayactivate=function(t){},e.onvrdisplayblur=function(t){},e.onvrdisplayconnect=function(t){},e.onvrdisplaydeactivate=function(t){},e.onvrdisplaydisconnect=function(t){},e.onvrdisplayfocus=function(t){},e.onvrdisplaypointerrestricted=function(t){},e.onvrdisplaypointerunrestricted=function(t){},e.onvrdisplaypresentchange=function(t){},t}();function Ut(t){return t.nodeType===St.ELEMENT_NODE}function Ft(t){return t.nodeType===St.TEXT_NODE}function Bt(t){return t.nodeType===St.DOCUMENT_FRAGMENT_NODE}function qt(t){var e,n=new zt,r=n,o=new l.Parser({onopentag:function(t,n){e=new kt(r,t,n),r.childNodes.push(e),r=e},onclosetag:function(t){r.parentNode&&(r=r.parentNode)},ontext:function(t){var e=new At(r,t);r.childNodes.push(e)},onprocessinginstruction:function(t,n){e="!doctype"===t?new $t(r,n):new Mt(r,n),r.childNodes.push(e)},oncomment:function(t){e=new Lt(r,t),r.childNodes.push(e)},oncommentend:function(){}},{decodeEntities:!1,lowerCaseTags:!0});return o.write(t),o.end(),n}function Ht(t){var e=[];return t.trim().split(" ").forEach((function(t){t.trim().split(">").forEach((function(t,n){for(var r,o=[],i=vt(t.matchAll(/\:not\(\#([^\.[#:]+)\)|\:not\(\.([^\.[#:]+)\)|\:not\(\[([^\.\[#:]+)\]\)|\:not\(([^\.\[#:\]]+)\)|\#([^\.[#:]+)|\.([^\.[#:]+)|\[([^\.\[#:]+)\]|([^\.\[#:\]]+)/g));!(r=i()).done;){var a=r.value;a[1]?o.push({selector:a[1],type:Et.Id,negate:!0}):a[2]?o.push({selector:a[2],type:Et.Class,negate:!0}):a[3]?o.push({selector:a[3],type:Et.Attribute,negate:!0}):a[4]?o.push({selector:a[4],type:Et.TagName,negate:!0}):a[5]?o.push({selector:a[5],type:Et.Id,negate:!1}):a[6]?o.push({selector:a[6],type:Et.Class,negate:!1}):a[7]?o.push({selector:a[7],type:Et.Attribute,negate:!1}):a[8]&&o.push({selector:a[8],type:Et.TagName,negate:!1})}var s=n>0?{selector:t,selectors:o,inner:!0}:{selector:t,selectors:o,inner:!1};e.push.call(e,s)}))})),e}function Gt(t,e){return e.reduce((function(e,n){return e&&function(t,e){switch(e.type){case Et.Id:return(""!==e.selector&&t.attributes.id===e.selector)!==e.negate;case Et.Class:return-1!==t.classList.indexOf(e.selector)!==e.negate;case Et.Attribute:return-1!==Object.keys(t.attributes).indexOf(e.selector)!==e.negate;case Et.TagName:return t.nodeName===e.selector!==e.negate;default:return!1}}(t,n)}),!0)}function Vt(t,e,n,r){if(void 0===n&&(n=null),void 0===r&&(r=[]),n||t.length){n=n||t.shift();for(var o,i=vt(e);!(o=i()).done;){var a=o.value;if(a instanceof kt)if(Gt(a,n.selectors))if(t.length){var s=Vt(t,a.childNodes);s&&Array.prototype.push.apply(r,s)}else r.push(a);else if(!n.inner){var u=Vt(t,a.childNodes,n);u&&Array.prototype.push.apply(r,u)}}}return r.length?r:null}function Yt(t,e,n){void 0===n&&(n=null);var r=null;if(n||t.length){n=n||t.shift();for(var o,i=vt(e);!(o=i()).done;){var a=o.value;if(a instanceof kt){if(Gt(a,n.selectors))return t.length?Yt(t,a.childNodes):a;n.inner||(r=Yt(t,a.childNodes,n))}}}return r}function Jt(t,e,n){var r;if(void 0===e&&(e=!1),void 0===n&&(n=null),Ut(t)){var o=new kt(n,t.nodeName,Object.assign({},t.attributes));e&&(o.childNodes=t.childNodes.map((function(t){return Jt.apply(t,[t,e,o])}))),r=o}else if(Bt(t)){var i=new Dt;e&&(i.childNodes=t.childNodes.map((function(t){return Jt.apply(t,[t,e,i])}))),r=i}else if(Ft(t))r=new At(n,t.nodeValue);else if(t.nodeType===St.COMMENT_NODE)r=new Lt(n,t.nodeValue);else{if(!function(t){return t.nodeType===St.DOCUMENT_NODE}(t))throw new Error("Invalid node type");var a=new zt;e&&(a.childNodes=t.childNodes.map((function(t){return Jt.apply(t,[t,e,a])}))),r=a}return r}var Kt=function(t){t&&Object.assign(this,t),this.vars=Object.assign({host:"http://localhost:5000",port:5e3,charset:"utf8",template:"./index.html",cacheMode:mt.Memory,cache:"./cache/",root:"./dist/browser/"},this.vars||{})},Wt=function(t){this.maxAge=3600,this.cacheControl=gt.Public,t&&Object.assign(this,t)},Xt=function(t){t&&Object.assign(this,t)},Zt=function(t){function e(){return t.apply(this,arguments)||this}return ut(e,t),e.bootstrap=function(t,e){if(!u.isPlatformServer)throw new u.ModuleError("missing platform server, node process not found");if(!t)throw new u.ModuleError("missing moduleFactory");if(!t.meta)throw new u.ModuleError("missing moduleFactory meta");if(!t.meta.bootstrap)throw new u.ModuleError("missing bootstrap");if(!t.meta.bootstrap.meta)throw new u.ModuleError("missing bootstrap meta");if(!t.meta.bootstrap.meta.selector)throw new u.ModuleError("missing bootstrap meta selector");if(!(null==e?void 0:e.template))throw new u.ModuleError("missing template");var n=this.resolveGlobals(e),r=this.resolveMeta(t);if(r.node instanceof kt){var o,i=r.node,a=r.nodeInnerHTML,s={selector:t.meta.bootstrap.meta.selector,innerHTML:a},c=new kt(null,"script"),l=new At(null,"var rxcomp_hydrate_ = "+JSON.stringify(s)+";");c.append(l),null==(o=i.parentNode)||o.insertBefore(c,i)}var f=new t;f.meta=r,r.imports.forEach((function(t){t.prototype.constructor.call(f)}));var h=f.compile(r.node,{document:n});return f.instances=h,h[0].pushChanges(),f},e.serialize=function(){if(this.document instanceof zt)return this.document.serialize();throw new u.ModuleError("document is not an instance of RxDocument")},e.resolveGlobals=function(t){var e=t.url,n=Pt.location;n.assign(e),global.location=n;var r=Ct.history;r.replaceState(null,"",n.origin),global.history=r;var o=t.template,i="string"==typeof o?qt(o):o;return this.document=i,global.document=this.document,r.replaceState(null,i.title||"",n.origin),global.window=global.self=new It({document:i,history:r,location:n,devicePixelRatio:1}),this.document},e}(u.Platform);function Qt(t){return c.Observable.create((function(e){var n=t.vars.template;n?(e.next(n),e.complete()):e.error(new Error("ServerError: you must provide a template path"))})).pipe(s.switchMap((function(t){return wt.readFile$(t)})),s.switchMap((function(e){return e?c.of(e):c.throwError(new Error("ServerError: missing template at path "+t.vars.template))})))}Zt.render$=function(t,e){var n;return c.Observable.create((function(e){n=new Kt(t),e.next(n),e.complete()})).pipe(s.switchMap((function(t){return function(t){t.vars.cacheMode&&(xt.mode=t.vars.cacheMode);t.vars.cache&&(xt.folder=t.vars.cache);return xt.get$("render",t.url)}(t)})),s.switchMap((function(t){return console.log("Server.render$.fromCache","route",n.url,!!t),t?c.of(t):function(t,e){return Qt(t).pipe(s.switchMap((function(n){return t.template=n,e(t)})),s.switchMap((function(e){return xt.set$("render",t.url,e,e.maxAge,e.cacheControl).pipe(s.switchMap((function(){return c.of(e)})))})))}(n,e)})))},Zt.template$=Qt,Zt.bootstrap$=function(t,e){return c.Observable.create((function(n){if(!e.template)return n.error(new Error("ServerError: missing template"));try{Zt.bootstrap(t,e);n.next(new Wt(Object.assign({serialize:function(){return Zt.serialize()}},e))),n.complete()}catch(t){n.error(new Xt(Object.assign({error:t},e)))}}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */;var te=function(t,e){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ee=function(){return(ee=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var ne=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function re(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oe(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function ie(t){return this instanceof ie?(this.v=t,this):new ie(t)}var ae=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var se=Object.freeze({__proto__:null,__extends:function(t,e){function n(){this.constructor=t}te(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},get __assign(){return ee},__rest:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},__decorate:function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},__generator:function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__createBinding:ne,__exportStar:function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||ne(e,t,n)},__values:re,__read:oe,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(oe(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},__await:ie,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=o[t](e)).value instanceof ie?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(t){l(i[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:ie(t[r](e)),done:"return"===r}:o?o(e):e}:o}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=re(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&ne(e,t,n);return ae(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}),ue=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e.prototype.onEnter=function(t){return p.of(!0)},e.prototype.onExit=function(t){return p.of(!0)},e}(h.Component);e.default=n})),ce=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.LocationStrategyHash=e.LocationStrategyPath=e.decodeParam=e.encodeParam=e.LocationStrategy=void 0;var n=function(){function t(){}return t.prototype.serializeLink=function(t){var e=this,n=(Array.isArray(t)?t:[t]).map((function(t){return"string"==typeof t?t:e.encodeParams(t)})).join("/");return this.serializeUrl(n)},t.prototype.serializeUrl=function(t){return t},t.prototype.serialize=function(t){return""+t.prefix+t.path+t.search+t.hash},t.prototype.resolve=function(t,e){var n,r;void 0===e&&(e={});var o,i,a,s="",u="",c="",l="",f=t.matchAll(/^([^\?|\#]*)?(\?[^\#]*)?(\#[^\#]*?)?$/gm);try{for(var h=se.__values(f),p=h.next();!p.done;p=h.next()){var d=p.value,y=d[1],v=d[2],m=d[3];y&&(u=y),v&&(c=v),m&&(l=m)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return s=s,u=u,c=c,l=l.substring(1,l.length),o=c.substring(1,c.length),i=u.split("/").filter((function(t){return""!==t})),a={},e.prefix=s,e.path=u,e.query=c,e.hash=l,e.search=o,e.segments=i,e.params=a,e},t.prototype.resolveParams=function(t,e){var n=this,r=t.split("/").filter((function(t){return""!==t})),o={};return e.forEach((function(t,e){var i=Object.keys(t.params);i.length&&(o[i[0]]=n.decodeParams(r[e]))})),o},t.prototype.encodeParams=function(t){var e;return"object"==typeof t?e=h.Serializer.encode(t,[h.encodeJson,h.encodeBase64,r]):"number"==typeof t&&(e=t.toString()),e},t.prototype.decodeParams=function(t){var e=t;if(0===t.indexOf(";"))try{e=h.Serializer.decode(t,[o,h.decodeBase64,h.decodeJson])}catch(n){e=t}else Number(t).toString()===t&&(e=Number(t));return e},t.prototype.encodeSegment=function(t){return this.encodeString(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")},t.prototype.decodeSegment=function(t){return this.decodeString(t.replace(/%28/g,"(").replace(/%29/g,")").replace(/\&/gi,"%26"))},t.prototype.encodeString=function(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")},t.prototype.decodeString=function(t){return decodeURIComponent(t.replace(/\@/g,"%40").replace(/\:/gi,"%3A").replace(/\$/g,"%24").replace(/\,/gi,"%2C"))},t.prototype.getPath=function(t){return t},t.prototype.getUrl=function(t,e){return t+(e?"?"+e.toString():"")},t.prototype.setHistory=function(t,e,n){if(h.isPlatformBrowser&&"undefined"!=typeof history&&history.pushState){var r=document.title;t=this.getUrl(t,e),n?history.replaceState(void 0,r,t):history.pushState(void 0,r,t)}},t}();function r(t){return";"+t}function o(t){return t.substring(1,t.length)}e.LocationStrategy=n,e.encodeParam=r,e.decodeParam=o;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e.prototype.serialize=function(t){return""+t.prefix+t.path+t.search+t.hash},e.prototype.resolve=function(t,e){var n,r;void 0===e&&(e={});var o,i,a,s="",u="",c="",l="",f=t.matchAll(/^([^\?|\#]*)?(\?[^\#]*)?(\#[^\#]*?)?$/gm);try{for(var h=se.__values(f),p=h.next();!p.done;p=h.next()){var d=p.value,y=d[1],v=d[2],m=d[3];y&&(u=y),v&&(c=v),m&&(l=m)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return s=s,u=u,c=c,l=l.substring(1,l.length),o=c.substring(1,c.length),i=u.split("/").filter((function(t){return""!==t})),a={},e.prefix=s,e.path=u,e.query=c,e.hash=l,e.search=o,e.segments=i,e.params=a,e},e}(n);e.LocationStrategyPath=i;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e.prototype.serializeLink=function(t){var e=this,n=(Array.isArray(t)?t:[t]).map((function(t){return"string"==typeof t?t:e.encodeParams(t)})).join("/");return this.serializeUrl(n)},e.prototype.serializeUrl=function(t){var e=this.resolve(t,{});return this.serialize(e)},e.prototype.serialize=function(t){return""+t.prefix+t.search+t.hash+t.path},e.prototype.resolve=function(t,e){var n,r;void 0===e&&(e={});var o,i,a,s="",u="",c="",l="#",f=t.matchAll(/^([^\?|\#]*)?(\?[^\#]*)?(\#.*)$/gm);try{for(var h=se.__values(f),p=h.next();!p.done;p=h.next()){var d=p.value,y=d[1],v=d[2],m=d[3];y&&(s=y),v&&(c=v),m&&(u=m)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return s=s,u=u.substring(1,u.length),l=l,o=c.substring(1,c.length),i=u.split("/").filter((function(t){return""!==t})),a={},e.prefix=s,e.path=u,e.query=c,e.hash=l,e.search=o,e.segments=i,e.params=a,e},e.prototype.getPath=function(t){return-1===t.indexOf("/#")?"/#"+t:t},e.prototype.getUrl=function(t,e){return(e?"?"+e.toString():"")+this.getPath(t)},e}(n);e.LocationStrategyHash=a})),le=y((function(t,e){function n(t){return t instanceof Promise||"object"==typeof t&&"then"in t&&"function"==typeof t.then}function r(t){return p.Observable.create((function(e){var r;try{var o=t();p.isObservable(o)?r=o.subscribe((function(t){e.next(t),e.complete()})):n(o)?o.then((function(t){e.next(t),e.complete()})):"boolean"==typeof o||Array.isArray(o)?(e.next(o),e.complete()):e.error(new Error("invalid value"))}catch(t){e.error(t)}return function(){r&&r.unsubscribe()}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=e.mapCanActivateChild$_=e.mapCanActivate$_=e.mapCanLoad$_=e.mapCanDeactivate$_=void 0,e.mapCanDeactivate$_=function(t){return function(e,n){return r((function(){return t.canDeactivate(e,n)}))}},e.mapCanLoad$_=function(t){return function(e,n){return r((function(){return t.canLoad(e,n)}))}},e.mapCanActivate$_=function(t){return function(e){return r((function(){return t.canActivate(e)}))}},e.mapCanActivateChild$_=function(t){return function(e){return r((function(){return t.canActivateChild(e)}))}},e.isPromise=n})),fe=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RouteSegment=void 0;var n=function(t,e){void 0===e&&(e={}),this.path=t,this.params=e};e.RouteSegment=n})),he=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Route=void 0;var n=function t(e){var n,r,o=this;this.pathMatch="prefix",this.relative=!0,this.canDeactivate=[],this.canLoad=[],this.canActivate=[],this.canActivateChild=[],e&&(Object.assign(this,e),this.canDeactivate=e.canDeactivate?e.canDeactivate.map((function(t){return le.mapCanDeactivate$_(t)})):[],this.canLoad=e.canLoad?e.canLoad.map((function(t){return le.mapCanLoad$_(t)})):[],this.canActivate=e.canActivate?e.canActivate.map((function(t){return le.mapCanActivate$_(t)})):[],this.canActivateChild=e.canActivateChild?e.canActivateChild.map((function(t){return le.mapCanActivateChild$_(t)})):[]),this.children&&(this.children=this.children.map((function(e){var n=new t(e);return n.parent=o,n})));var i=[];if("**"===this.path)i.push(new fe.RouteSegment(this.path)),this.matcher=new RegExp("^.*$");else{var a=["^(../|./|//|/)?"],s=this.path.matchAll(/(^\.\.\/|\.\/|\/\/|\/)|([^:|\/]+)\/?|\:([^\/]+)\/?/g);try{for(var u=se.__values(s),c=u.next();!c.done;c=u.next()){var l=c.value,f=l[1],h=l[2],p=l[3];if(f)this.relative=!("//"===f||"/"===f);else if(h)a.push(h),i.push(new fe.RouteSegment(h));else if(p){a.push("(/[^/]+)");var d={};d[p]=null,i.push(new fe.RouteSegment("",d))}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}"full"===this.pathMatch&&a.push("$");var y=a.join("");this.matcher=new RegExp(y)}this.segments=i};e.Route=n})),pe=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RoutePath=void 0;var n=function(){function t(t,e,n,r){void 0===t&&(t=""),void 0===e&&(e=[]),this.prefix="",this.path="",this.query="",this.search="",this.hash="",this.locationStrategy=r||new ce.LocationStrategy,this.url=t,this.routeSegments=e,this.route=n}return Object.defineProperty(t.prototype,"url",{get:function(){return this.url_},set:function(t){this.url_!==t&&(this.locationStrategy.resolve(t,this),this.url_=this.locationStrategy.serialize(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"routeSegments",{get:function(){return this.routeSegments_},set:function(t){this.routeSegments_!==t&&(this.routeSegments_=t,this.params=this.locationStrategy.resolveParams(this.path,t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remainUrl",{get:function(){return this.query+this.hash},enumerable:!1,configurable:!0}),t}();e.RoutePath=n})),de=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RouteSnapshot=void 0;var n=function(){function t(t){this.pathMatch="prefix",this.relative=!0,this.data$=new p.ReplaySubject(1),this.params$=new p.ReplaySubject(1),this.queryParams$=new p.ReplaySubject(1),this.canDeactivate=[],this.canLoad=[],this.canActivate=[],this.canActivateChild=[],t&&Object.assign(this,t),this.data$.next(this.data),this.params$.next(this.params),this.queryParams$.next(this.queryParams)}return t.prototype.next=function(t){this.childRoute=t.childRoute,t.childRoute&&(t.childRoute.parent=this);var e=this.data=Object.assign({},t.data);this.data$.next(e);var n=this.params=Object.assign({},t.params);this.params$.next(n);var r=this.queryParams=Object.assign({},t.queryParams);this.queryParams$.next(r)},t}();e.RouteSnapshot=n})),ye=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationError=e.NavigationCancel=e.NavigationEnd=e.RouteConfigLoadEnd=e.RouteConfigLoadStart=e.ChildActivationEnd=e.ActivationEnd=e.ResolveEnd=e.ResolveStart=e.GuardsCheckEnd=e.ActivationStart=e.ChildActivationStart=e.GuardsCheckStart=e.RoutesRecognized=e.NavigationStart=e.RouterEvent=void 0;var n=function(t){t&&Object.assign(this,t),this.routerLink&&(this.url=Array.isArray(this.routerLink)?this.routerLink.join(""):this.routerLink)};e.RouterEvent=n;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.NavigationStart=r;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.RoutesRecognized=o;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.GuardsCheckStart=i;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ChildActivationStart=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ActivationStart=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.GuardsCheckEnd=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ResolveStart=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ResolveEnd=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ActivationEnd=f;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.ChildActivationEnd=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.RouteConfigLoadStart=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.RouteConfigLoadEnd=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.NavigationEnd=y;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.NavigationCancel=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),e}(n);e.NavigationError=m})),ve=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"flatRoutes",{get:function(){return r(this.routes)},enumerable:!1,configurable:!0}),t.setRoutes=function(t){return this.routes=t.map((function(t){return new he.Route(t)})),this.observe$=s(this.routes,this.route$,this.events$,this.locationStrategy),this},t.setRouterLink=function(t,e){this.events$.next(new ye.NavigationStart({routerLink:t,trigger:"imperative"}))},t.navigate=function(t,e){this.events$.next(new ye.NavigationStart({routerLink:t,trigger:"imperative"}))},t.findRoute=function(t){var e=this.locationStrategy.serializeLink(t);return this.findRouteByUrl(e)},t.findRouteByUrl=function(t){var e,n,o=r(this.routes),i=null,a=Number.NEGATIVE_INFINITY;try{for(var s=se.__values(o),u=s.next();!u.done;u=s.next()){var c=u.value,l=t.match(c.matcher);l&&(!i||l[0].length>a)&&(a=l[0].length,i=c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}var f=t;return i&&i.redirectTo&&(f=i.redirectTo,i=this.findRouteByUrl(f)),i},t.getPath=function(t){var e=this;void 0===t&&(t=[]);var n=(Array.isArray(t)?t:[t]).map((function(t){return"string"==typeof t?t:e.locationStrategy.encodeParams(t)})).join("/"),r=[],o=[],i=this.findRouteByUrl(n);if(i){for(var a=null==i?void 0:i.parent;a;)r.unshift.apply(r,a.segments),o.unshift(a instanceof de.RouteSnapshot?a:a.snapshot||a),a=a.parent;r.push.apply(r,(null==i?void 0:i.segments)||[]),o.push({path:n})}var s=o.map((function(t){return t instanceof de.RouteSnapshot?t.extractedUrl:t.path})).join("/");return s=this.locationStrategy.getPath(s),new pe.RoutePath(s,r,i||void 0,this.locationStrategy)},Object.defineProperty(t,"locationStrategy",{get:function(){return this.locationStrategy_?this.locationStrategy_:this.locationStrategy_=new ce.LocationStrategyPath},enumerable:!1,configurable:!0}),t.useLocationStrategy=function(t){this.locationStrategy_=new t},t.routes=[],t.route$=new p.ReplaySubject(1),t.events$=new p.ReplaySubject(1),t}();function r(t){return function t(e){return e.reduce((function(e,n){return e.push(n),e.push.apply(e,t(n.children||[])),e}),[])}(t)}function o(t,e,n){var r,o,a;try{for(var s=se.__values(e),u=s.next();!u.done;u=s.next()){var c=i(t,u.value,n);c&&(!a||c.remainUrl.length<a.remainUrl.length)&&(a=c)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}function i(t,e,r){var i,a,s,u=r.match(e.matcher);if(u){if(e.redirectTo)return o(t,t,n.getPath(e.redirectTo).url);a=u[0],s=r.substring(u[0].length,r.length);var c=new pe.RoutePath(a,e.segments,void 0,n.locationStrategy).params,l=new de.RouteSnapshot(se.__assign(se.__assign({},e),{initialUrl:r,urlAfterRedirects:undefined,extractedUrl:a,remainUrl:s,params:c}));if(e.snapshot=l,(null===(i=e.children)||void 0===i?void 0:i.length)&&s.length){var f=o(t,e.children,s);l.childRoute=f,f&&(f.parent=l)}return l}}function a(t,e){return p.combineLatest.apply(void 0,se.__spread(e)).pipe(f.map((function(e){var r=e.reduce((function(t,e){return!0===t?!0===e||e:t}),!0);if(!0===r)return t;var o=se.__assign(se.__assign({},t),{reason:"An activation guard has dismissed navigation to the route."});if(!1!==r){var i=n.getPath(r);o.redirectTo=[i.url]}return new ye.NavigationCancel(o)})))}function s(t,e,i,s){var u,c=h.isPlatformServer?p.EMPTY:p.merge(p.fromEvent(h.WINDOW,"popstate")).pipe(f.map((function(t){return new ye.NavigationStart({routerLink:document.location.pathname,trigger:"popstate"})})),f.shareReplay(1));return p.merge(c,i).pipe(f.switchMap((function(t){return t instanceof ye.GuardsCheckStart?function(t,e,n){if(e.route.canDeactivate&&e.route.canDeactivate.length){var r=e.route,o=h.getContextByNode(e.route.element).instance;return a(e,r.canDeactivate.map((function(t){return t(o,n)})))}return p.of(e)}(0,t,u).pipe(f.switchMap((function(e){return e instanceof ye.NavigationCancel?p.of(e):function(t,e){if(e.route.canLoad&&e.route.canLoad.length){var n=e.route;return a(e,n.canLoad.map((function(t){return t(n,n.segments)})))}return p.of(e)}(0,t).pipe(f.switchMap((function(e){return e instanceof ye.NavigationCancel?p.of(e):function(t,e){var n=function(t,e){for(;null!=t&&t.canActivateChild&&t.canActivateChild.length&&t.childRoute;){var n=t.canActivateChild.map((function(e){return e(t.childRoute)}));Array.prototype.push.apply(e,n),t=t.childRoute}return e}(e.route,[]);return n.length?a(e,n):p.of(e)}(0,t)})))}))):t instanceof ye.ChildActivationStart?function(t,e){if(e.route.canActivate&&e.route.canActivate.length){var n=e.route;return a(e,n.canActivate.map((function(t){return t(n)})))}return p.of(e)}(0,t):p.of(t)})),f.tap((function(a){var c,l,f;if(a instanceof ye.NavigationStart){var h=a.routerLink,p=void 0,d=void 0;0!==(d=n.getPath(h).url).indexOf("/")&&u&&(null===(c=u.children)||void 0===c?void 0:c.length)?(p=o(t,u.children,d))&&(u.childRoute=p,p.parent=u,p=u):p=o(t,t,d),p?(u=p,i.next(new ye.RoutesRecognized(se.__assign(se.__assign({},a),{route:p})))):i.next(new ye.NavigationError(se.__assign(se.__assign({},a),{error:new Error("unknown route")})))}else if(a instanceof ye.RoutesRecognized)i.next(new ye.GuardsCheckStart(se.__assign({},a)));else if(a instanceof ye.GuardsCheckStart)i.next(new ye.ChildActivationStart(se.__assign({},a)));else if(a instanceof ye.ChildActivationStart)i.next(new ye.ActivationStart(se.__assign({},a)));else if(a instanceof ye.ActivationStart)i.next(new ye.GuardsCheckEnd(se.__assign({},a)));else if(a instanceof ye.GuardsCheckEnd)i.next(new ye.ResolveStart(se.__assign({},a)));else if(a instanceof ye.ResolveStart)i.next(new ye.ResolveEnd(se.__assign({},a)));else if(a instanceof ye.ResolveEnd)i.next(new ye.ActivationEnd(se.__assign({},a)));else if(a instanceof ye.ActivationEnd)i.next(new ye.ChildActivationEnd(se.__assign({},a)));else if(a instanceof ye.ChildActivationEnd)i.next(new ye.RouteConfigLoadStart(se.__assign({},a)));else if(a instanceof ye.RouteConfigLoadStart)i.next(new ye.RouteConfigLoadEnd(se.__assign({},a)));else if(a instanceof ye.RouteConfigLoadEnd)i.next(new ye.NavigationEnd(se.__assign({},a)));else if(a instanceof ye.NavigationEnd){for(var y=[],v=a.route;null!=v;)(null===(l=v.extractedUrl)||void 0===l?void 0:l.length)&&y.push(v.extractedUrl),v.childRoute?v=v.childRoute:((null===(f=v.remainUrl)||void 0===f?void 0:f.length)&&(y[y.length-1]=y[y.length-1]+v.remainUrl),v=void 0);var m=y.join("/").replace(/\/\//g,"/");console.log("NavigationEnd",a.route.initialUrl,a.route.extractedUrl,a.route.urlAfterRedirects),function(t,e){var n=function(t){for(var e=[t],n=t.childRoute;n;)e.push(n),n=n.childRoute;return e}(e);r(t).forEach((function(t){t.snapshot&&-1===n.indexOf(t.snapshot)&&(t.snapshot=void 0)}))}(t,a.route),s.setHistory(m,void 0,"popstate"===a.trigger),e.next(a.route)}else a instanceof ye.NavigationCancel?(console.log("NavigationCancel",a.reason,a.redirectTo),a.redirectTo&&i.next(new ye.NavigationStart({routerLink:a.redirectTo,trigger:"imperative"}))):a instanceof ye.NavigationError&&console.log("NavigationError",a.error)})),f.catchError((function(t){return p.of(new ye.NavigationError(se.__assign(se.__assign({},event),{error:t})))})),f.shareReplay(1))}e.default=n})),me=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=se.__importDefault(ve),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return se.__extends(e,t),Object.defineProperty(e.prototype,"routerLink",{get:function(){return this.routerLink_},set:function(t){this.routerLink_=Array.isArray(t)?t:[t],this.segments=this.getSegments(this.routerLink_)},enumerable:!1,configurable:!0}),e.prototype.getSegments=function(t){var e=[];return t.forEach((function(t){var n,r;if("string"==typeof t){var o=t.matchAll(/([^:]+)|\:([^\/]+)/g),i=[];try{for(var a=se.__values(o),s=a.next();!s.done;s=a.next()){var u=s.value,c=u[1],l=u[2];if(c)i.push(c);else if(l){var f={};f[l]=null,i.push(f)}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}else e.push(new fe.RouteSegment("",{}))})),e},e.prototype.onInit=function(){var t=this,e=h.getContext(this).node;p.fromEvent(e,"click").pipe(f.shareReplay(1)).pipe(f.takeUntil(this.unsubscribe$)).subscribe((function(e){var r={skipLocationChange:t.skipLocationChange,replaceUrl:t.replaceUrl,state:t.state};return n.default.setRouterLink(t.routerLink,r),e.preventDefault(),!1}))},e.prototype.onChanges=function(){var t=h.getContext(this).node,e=n.default.getPath(this.routerLink_);t.setAttribute("href",e.url)},e.meta={selector:"[routerLink],[[routerLink]]",inputs:["routerLink"]},e}(h.Directive);e.default=r})),ge=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=se.__importDefault(me),r=se.__importDefault(ve),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keys=[],e}return se.__extends(e,t),e.prototype.onChanges=function(){var t=h.getContext(this).node;t.classList.remove.apply(t.classList,this.keys);var e=[];if(this.isActive()){var n=this.routerLinkActive;if("object"==typeof n)for(var r in n)n[r]&&e.push(r);else"string"==typeof n&&(e=n.split(" ").filter((function(t){return t.length})))}t.classList.add.apply(t.classList,e),this.keys=e},e.prototype.isActive=function(){var t;return null!=(null===(t=r.default.getPath(this.host.routerLink).route)||void 0===t?void 0:t.snapshot)},e.meta={selector:"[routerLinkActive],[[routerLinkActive]]",hosts:{host:n.default},inputs:["routerLinkActive"]},e}(h.Directive);e.default=o})),be=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=se.__importDefault(ue),r=se.__importDefault(ve),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.route$_=new p.ReplaySubject(1),e}return se.__extends(e,t),Object.defineProperty(e.prototype,"route",{get:function(){return this.route_},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){var t,e=this;this.route$().pipe(f.switchMap((function(t){return e.factory$(t)})),f.takeUntil(this.unsubscribe$)).subscribe((function(){})),this.host&&this.route$_.next(null===(t=this.host.route)||void 0===t?void 0:t.childRoute)},e.prototype.onChanges=function(){var t;this.host&&this.route$_.next(null===(t=this.host.route)||void 0===t?void 0:t.childRoute)},e.prototype.route$=function(){var t=this;return(this.host?this.route$_:r.default.route$).pipe(f.filter((function(e){return t.route_=e,t.snapshot_&&e&&t.snapshot_.component===e.component?(t.snapshot_.next(e),!1):(t.snapshot_=e,!0)})))},e.prototype.factory$=function(t){var e=this,n=h.getContext(this),r=n.module,o=n.node,i=null==t?void 0:t.component;return this.factory_!==i?(this.factory_=i,this.onExit$_(this.element,this.instance).pipe(f.tap((function(){e.element&&(e.element.parentNode.removeChild(e.element),r.remove(e.element,e),e.element=void 0,e.instance=void 0)})),f.switchMap((function(){if(t&&i&&i.meta.template){var n=document.createElement("div");n.innerHTML=i.meta.template,1===n.children.length&&(n=n.firstElementChild),o.appendChild(n);var a=r.makeInstance(n,i,i.meta.selector,e,void 0,{route:t});return r.compile(n,a),e.instance=a,e.element=n,t.element=n,e.onEnter$_(n,a)}return p.of(!1)})))):p.of(!1)},e.prototype.onEnter$_=function(t,e){return t&&e&&e instanceof n.default?i([t],e.onEnter):p.of(!0)},e.prototype.onExit$_=function(t,e){return t&&e&&e instanceof n.default?i([t],e.onExit):p.of(!0)},e.meta={selector:"router-outlet,[router-outlet]",hosts:{host:e}},e}(h.Structure);function i(t,e){return p.Observable.create((function(n){var r;try{var o=e.apply(void 0,se.__spread(t));p.isObservable(o)?r=o.subscribe((function(t){n.next(t),n.complete()})):le.isPromise(o)?o.then((function(t){n.next(t),n.complete()})):"function"==typeof o?(n.next(o()),n.complete()):(n.next(o),n.complete())}catch(t){n.error(t)}return function(){r&&r.unsubscribe()}}))}e.default=o})),_e=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=se.__importDefault(ge),r=se.__importDefault(me),o=se.__importDefault(be),i=se.__importDefault(ve),a=[o.default,r.default,n.default],s=[],u=function(t){function e(){var e=t.call(this)||this;return i.default.observe$.pipe(f.tap((function(t){var n;(t instanceof ye.NavigationEnd||t instanceof ye.NavigationCancel||t instanceof ye.NavigationError)&&((null===(n=e.instances)||void 0===n?void 0:n.length)&&e.instances[0].pushChanges())})),f.takeUntil(e.unsubscribe$)).subscribe(),i.default.navigate(""+(""===location.pathname?"/":location.pathname)+location.search+location.hash),e}return se.__extends(e,t),e.forRoot=function(t){return i.default.setRoutes(t),this},e.useStrategy=function(t){return i.default.useLocationStrategy(t),this},e.meta={declarations:se.__spread(a,s),exports:se.__spread(a,s)},e}(h.Module);e.default=u})),we=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RouteLocationStrategy=void 0,function(t){t.Path="path",t.Hash="hash"}(e.RouteLocationStrategy||(e.RouteLocationStrategy={}))})),Oe=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.transition$=void 0,e.transition$=function(t){return p.Observable.create((function(e){try{h.isPlatformBrowser?t((function(t){e.next(t),e.complete()})):(e.next(!0),e.complete())}catch(t){e.error(t)}}))}})),xe=y((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"View",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"LocationStrategy",{enumerable:!0,get:function(){return ce.LocationStrategy}}),Object.defineProperty(e,"LocationStrategyHash",{enumerable:!0,get:function(){return ce.LocationStrategyHash}}),Object.defineProperty(e,"LocationStrategyPath",{enumerable:!0,get:function(){return ce.LocationStrategyPath}}),Object.defineProperty(e,"Route",{enumerable:!0,get:function(){return he.Route}}),Object.defineProperty(e,"RoutePath",{enumerable:!0,get:function(){return pe.RoutePath}}),Object.defineProperty(e,"RouteSegment",{enumerable:!0,get:function(){return fe.RouteSegment}}),Object.defineProperty(e,"RouteSnapshot",{enumerable:!0,get:function(){return de.RouteSnapshot}}),Object.defineProperty(e,"RouterModule",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(e,"RouteLocationStrategy",{enumerable:!0,get:function(){return we.RouteLocationStrategy}}),Object.defineProperty(e,"ActivationEnd",{enumerable:!0,get:function(){return ye.ActivationEnd}}),Object.defineProperty(e,"ActivationStart",{enumerable:!0,get:function(){return ye.ActivationStart}}),Object.defineProperty(e,"ChildActivationEnd",{enumerable:!0,get:function(){return ye.ChildActivationEnd}}),Object.defineProperty(e,"ChildActivationStart",{enumerable:!0,get:function(){return ye.ChildActivationStart}}),Object.defineProperty(e,"GuardsCheckEnd",{enumerable:!0,get:function(){return ye.GuardsCheckEnd}}),Object.defineProperty(e,"GuardsCheckStart",{enumerable:!0,get:function(){return ye.GuardsCheckStart}}),Object.defineProperty(e,"NavigationCancel",{enumerable:!0,get:function(){return ye.NavigationCancel}}),Object.defineProperty(e,"NavigationEnd",{enumerable:!0,get:function(){return ye.NavigationEnd}}),Object.defineProperty(e,"NavigationError",{enumerable:!0,get:function(){return ye.NavigationError}}),Object.defineProperty(e,"NavigationStart",{enumerable:!0,get:function(){return ye.NavigationStart}}),Object.defineProperty(e,"ResolveEnd",{enumerable:!0,get:function(){return ye.ResolveEnd}}),Object.defineProperty(e,"ResolveStart",{enumerable:!0,get:function(){return ye.ResolveStart}}),Object.defineProperty(e,"RouteConfigLoadEnd",{enumerable:!0,get:function(){return ye.RouteConfigLoadEnd}}),Object.defineProperty(e,"RouteConfigLoadStart",{enumerable:!0,get:function(){return ye.RouteConfigLoadStart}}),Object.defineProperty(e,"RouterEvent",{enumerable:!0,get:function(){return ye.RouterEvent}}),Object.defineProperty(e,"RoutesRecognized",{enumerable:!0,get:function(){return ye.RoutesRecognized}}),Object.defineProperty(e,"RouterLinkActiveDirective",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"RouterLinkDirective",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"RouterOutletStructure",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(e,"transition$",{enumerable:!0,get:function(){return Oe.transition$}})})),Se=function(t){function e(){return t.apply(this,arguments)||this}return ut(e,t),e.prototype.onInit=function(){u.getContext(this).node.classList.add("init")},e}(u.Component);Se.meta={selector:"[app-component]"};var Ee=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),Ne=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t).pipe(s.tap((function(e){e instanceof a.HttpResponse&&(console.log("CustomResponseInterceptor.status",e.status),console.log("CustomResponseInterceptor.filter",t.params.get("filter")))})))},t}(),Pe=function(t){function e(){return t.apply(this,arguments)||this}return ut(e,t),e.prototype.onInit=function(){},e}(u.Component);Pe.meta={selector:"[not-found-component]",template:'\n        <div class="page-not-found">\n            <div class="title">Not Found</div>\n        </div>\n        '};var Ce=function(t){function e(){return t.apply(this,arguments)||this}ut(e,t);var n=e.prototype;return n.onInit=function(){var t=this;console.log("TodolistItemComponent.onInit",this.route),c.combineLatest(this.route.data$,this.route.params$).pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(e){t.title=e[0].title,t.itemId=e[1].itemId}))},n.onEnter=function(t){return xe.transition$((function(e){gsap.set(t,{opacity:0}),gsap.to(t,{opacity:1,duration:1,ease:Power3.easeInOut,onComplete:function(){e(!0)}})}))},n.onExit=function(t){return xe.transition$((function(e){gsap.set(t,{opacity:1}),gsap.to(t,{opacity:0,duration:1,ease:Power3.easeInOut,onComplete:function(){e(!0)}})}))},e}(xe.View);Ce.meta={selector:"[detail-component]",template:'\n        <div class="page-detail">\n            <div class="title">Todolist Item {{itemId}}</div>\n        </div>\n        '};var je={name:"rxcomp-server",host:"",resource:"/",api:"/api",static:!1,development:!1,production:!0},Te=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).items=[],e.error=null,e}ut(e,t);var n=e.prototype;return n.onInit=function(){var t=this,e=""+je.host+je.api;a.HttpService.post$(e,{query:"{ getTodos { id, title, completed } }"},{params:{query:"{ getTodos { id, title, completed } }"},reportProgress:!1}).pipe(s.first()).subscribe((function(e){t.items=e.data.getTodos,t.pushChanges()}),(function(t){return console.warn}));var n=this.host.route;n&&n.data$.pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(e){t.title=e.title})),u.errors$.pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(e){t.error=e,t.pushChanges()}))},n.onClick=function(t){t.completed=!t.completed,this.pushChanges()},e}(u.Component);Te.meta={selector:"[todolist-component]",hosts:{host:xe.RouterOutletStructure},template:'\n        <div class="page-todolist">\n\t\t\t<div class="title">{{title}}</div>\n\t\t\t\x3c!-- {{items | json}} --\x3e\n\t\t\t<ul class="list">\n\t\t\t\t<li class="list__item" *for="let item of items" [class]="{ completed: item.completed }" [style]="{ \'border-color\': item.completed ? \'red\' : \'black\' }">\n\t\t\t\t\t<div class="title" [routerLink]="[\'/todolist\', item.id]" [innerHTML]="item.title"></div>\n\t\t\t\t\t\x3c!-- <div class="completed" [innerHTML]="item.completed"></div> --\x3e\n\t\t\t\t\t<div class="completed" (click)="onClick(item)">{{item.completed}}</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div *if="error">\n\t\t\t\t<span>error => {{error | json}}</span>\n\t\t\t</div>\n        </div>\n        '};var Re=function(t){function e(){return t.apply(this,arguments)||this}return ut(e,t),e}(u.Module);Re.meta={imports:[u.CoreModule,a.HttpModule.useInterceptors([Ee,Ne]),xe.RouterModule.forRoot([{path:"",redirectTo:"/todolist",pathMatch:"full"},{path:"todolist",component:Te,data:{title:"Todolist"}},{path:"todolist/:itemId",component:Ce,data:{title:"Todolist Item"}},{path:"**",component:Pe}]).useStrategy(xe.LocationStrategyHash)],declarations:[Te,Ce,Pe],bootstrap:Se},t.renderRequest$=function(t){return je.host=t.vars.host,Zt.bootstrap$(Re,t).pipe(s.switchMap((function(t){return a.HttpService.pendingRequests$.pipe(s.filter((function(t){return 0===t})),s.map((function(){return t.body=t.serialize(),t})),s.first())})))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=main.min.js.map