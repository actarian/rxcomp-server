{"version":3,"sources":["web/client/src/main.browser.ts","../../../client/src/app.component.ts","../../../client/src/custom-interceptor/custom.interceptor.ts","../../../client/src/pages/not-found.component.ts","../../../client/src/pages/todolist-item.component.ts","../../../client/src/vars.ts","../../../client/src/pages/todolist.component.ts","../../../client/src/app.module.ts","../../../client/src/main.browser.ts"],"names":["rxcomp","rxcompHttp","rxcompRouter","rxjs","operators","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","AppComponent","_Component","apply","this","arguments","onInit","getContext","node","classList","add","Component","selector","CustomRequestInterceptor","intercept","request","next","handle","CustomResponseInterceptor","pipe","tap","event","HttpResponse","console","log","status","params","get","NotFoundComponent","template","TodolistItemComponent","_View","_proto","_this","combineLatest","route","data$","params$","takeUntil","unsubscribe$","subscribe","datas","title","itemId","onEnter","transition$","complete","gsap","set","opacity","to","duration","ease","Power3","easeOut","onComplete","onExit","View","Vars","TodolistComponent","items","error","_this2","HttpService","get$","first","response","data","getTodos","pushChanges","warn","host","errors$","onClick","item","completed","hosts","RouterOutletStructure","AppModule","_Module","Module","imports","CoreModule","HttpModule","useInterceptors","RouterModule","forRoot","path","redirectTo","pathMatch","component","declarations","bootstrap","Browser","http","router"],"mappings":"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","file":"web\\dist\\development\\browser\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext, IFactoryMeta } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('init');\r\n\t}\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: '[app-component]',\r\n\t};\r\n}\r\n","\r\nimport { HttpEvent, HttpHandler, HttpRequest, HttpResponse, IHttpInterceptor } from 'rxcomp-http';\r\nimport { EMPTY, Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nconst cancelRequest: boolean = false;\r\nexport class CustomRequestInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\tif (cancelRequest) {\r\n\t\t\treturn EMPTY;\r\n\t\t}\r\n\t\treturn next.handle(request);\r\n\t}\r\n}\r\nexport class CustomResponseInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\treturn next.handle(request).pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tif (event instanceof HttpResponse) {\r\n\t\t\t\t\tconsole.log('CustomResponseInterceptor.status', event.status);\r\n\t\t\t\t\tconsole.log('CustomResponseInterceptor.filter', request.params.get('filter'));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n}\r\nexport class CustomRequestCloneInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\tconst clonedRequest = request.clone({\r\n\t\t\turl: request.url,\r\n\t\t});\r\n\t\treturn next.handle(clonedRequest);\r\n\t}\r\n}\r\n","import { Component, IFactoryMeta } from 'rxcomp';\r\nimport { RouterOutletStructure } from 'rxcomp-router';\r\n\r\nexport default class NotFoundComponent extends Component {\r\n\thost!: RouterOutletStructure;\r\n\tonInit() {\r\n\t\t// console.log('NotFoundComponent.onInit');\r\n\t}\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: '[not-found-component]',\r\n\t\ttemplate: /* html */`\r\n        <div class=\"page-not-found\">\r\n            <div class=\"title\">Not Found</div>\r\n        </div>\r\n        `,\r\n\t};\r\n}\r\n","import 'gsap';\nimport { IElement, IFactoryMeta } from 'rxcomp';\nimport { RouterKeyValue, transition$, View } from 'rxcomp-router';\nimport { combineLatest } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport default class TodolistItemComponent extends View {\n\tonInit() {\n\t\t// console.log('TodolistItemComponent.onInit', this.route);\n\t\tcombineLatest([this.route.data$, this.route.params$]).pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((datas: RouterKeyValue[]) => {\n\t\t\tthis.title = datas[0].title;\n\t\t\tthis.itemId = datas[1].itemId;\n\t\t\t// this.pushChanges(); // !!! not needed;\n\t\t\t// console.log('TodolistItemComponent', datas);\n\t\t});\n\t}\n\tonEnter(node: IElement) {\n\t\treturn transition$(complete => {\n\t\t\tgsap.set(node, { opacity: 0 });\n\t\t\tgsap.to(node, {\n\t\t\t\topacity: 1,\n\t\t\t\tduration: 0.6,\n\t\t\t\tease: Power3.easeOut,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tcomplete(true);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tonExit(node: IElement) {\n\t\treturn transition$(complete => {\n\t\t\tgsap.set(node, { opacity: 1 });\n\t\t\tgsap.to(node, {\n\t\t\t\topacity: 0,\n\t\t\t\tduration: 0.6,\n\t\t\t\tease: Power3.easeOut,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tcomplete(true);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[detail-component]',\n\t\ttemplate: /* html */`\n        <div class=\"page-detail\">\n            <div class=\"title\">Todolist Item {{itemId}}</div>\n        </div>\n        `,\n\t};\n}\n","import { IServerVars } from \"../../../src/rxcomp-server\";\r\n\r\nexport const Vars: IServerVars = {\r\n\tname: 'rxcomp-server',\r\n\thost: '',\r\n\tresource: '/',\r\n\tapi: '/api',\r\n\tstatic: false,\r\n\tdevelopment: false,\r\n\tproduction: true,\r\n};\r\n/*\r\nexport const STATIC = window.location.port === '40333' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'ws-events',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/Modules/Events/Client/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Modules/Events/Client/docs/api' : './api',\r\n};\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\t// console.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n*/\r\n","import { Component, errors$, IFactoryMeta } from 'rxcomp';\nimport { HttpService } from 'rxcomp-http';\nimport { RouterKeyValue, RouterOutletStructure } from 'rxcomp-router';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { IResponseData, ITodoItem } from '../todo/todo';\nimport { Vars } from '../vars';\n\nexport default class TodolistComponent extends Component {\n\thost!: RouterOutletStructure;\n\titems: ITodoItem[] = [];\n\terror: any = null;\n\tonInit() {\n\t\tconst mode: number = 3;\n\t\tconst payload = { query: `{ getTodos { id, title, completed } }` };\n\t\tconst methodUrl: string = `${Vars.host}${Vars.api}`;\n\t\t// console.log('TodolistComponent.onInit', this);\n\t\tif (mode === 1) {\n\t\t\tHttpService.post$<IResponseData>(methodUrl, payload, {\n\t\t\t\tparams: { query: `{ getTodos { id, title, completed } }` },\n\t\t\t\treportProgress: false\n\t\t\t}).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t} else if (mode === 2) {\n\t\t\t// console.log('TodolistComponent.methodUrl', methodUrl);\n\t\t\tHttpService.post$<IResponseData>(methodUrl, payload).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t} else {\n\t\t\tHttpService.get$<IResponseData>(`${Vars.host}/assets/data/todos.json`).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t}\n\t\tconst route = this.host.route;\n\t\tif (route) {\n\t\t\troute.data$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe((data: RouterKeyValue) => {\n\t\t\t\tthis.title = data.title;\n\t\t\t\t// this.pushChanges(); // !! not needed;\n\t\t\t\t// console.log('TodolistComponent', data);\n\t\t\t});\n\t\t}\n\t\t// generic errors\n\t\terrors$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(error => {\n\t\t\tthis.error = error;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\tonClick(item: { title: string, completed: boolean }) {\n\t\titem.completed = !item.completed;\n\t\tthis.pushChanges();\n\t}\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[todolist-component]',\n\t\thosts: { host: RouterOutletStructure },\n\t\ttemplate: /* html */`\n        <div class=\"page-todolist\">\n\t\t\t<div class=\"title\">{{title}}</div>\n\t\t\t<!-- {{items | json}} -->\n\t\t\t<ul class=\"list\">\n\t\t\t\t<li class=\"list__item\" *for=\"let item of items\" [class]=\"{ completed: item.completed }\" [style]=\"{ 'border-color': item.completed ? 'red' : 'black' }\">\n\t\t\t\t\t<div class=\"title\" [routerLink]=\"['/todolist', item.id]\" [innerHTML]=\"item.title\"></div>\n\t\t\t\t\t<div class=\"completed\" (click)=\"onClick(item)\" [innerHTML]=\"item.completed\"></div>\n\t\t\t\t\t<!-- !!! debug -->\n\t\t\t\t\t<!-- <div class=\"completed\" (click)=\"onClick(item)\">{{item.completed}}</div> -->\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div *if=\"error\">\n\t\t\t\t<span>error => {{error | json}}</span>\n\t\t\t</div>\n        </div>\n        `,\n\t};\n}\n","import { CoreModule, IModuleMeta, Module } from 'rxcomp';\r\nimport { HttpModule } from 'rxcomp-http';\r\nimport { RouterModule } from 'rxcomp-router';\r\nimport AppComponent from './app.component';\r\nimport { CustomRequestInterceptor, CustomResponseInterceptor } from './custom-interceptor/custom.interceptor';\r\nimport NotFoundComponent from './pages/not-found.component';\r\nimport TodolistItemComponent from './pages/todolist-item.component';\r\nimport TodolistComponent from './pages/todolist.component';\r\n\r\nexport default class AppModule extends Module {\r\n\tstatic meta: IModuleMeta = {\r\n\t\timports: [\r\n\t\t\tCoreModule,\r\n\t\t\tHttpModule.useInterceptors([CustomRequestInterceptor, CustomResponseInterceptor]),\r\n\t\t\tRouterModule.forRoot([\r\n\t\t\t\t{ path: '', redirectTo: '/todolist', pathMatch: 'full' },\r\n\t\t\t\t{ path: 'todolist', component: TodolistComponent, data: { title: 'Todolist' } },\r\n\t\t\t\t{ path: 'todolist/:itemId', component: TodolistItemComponent, data: { title: 'Todolist Item' } },\r\n\t\t\t\t{ path: '**', component: NotFoundComponent },\r\n\t\t\t]), // .useStrategy(LocationStrategyHash),\r\n\t\t],\r\n\t\tdeclarations: [\r\n\t\t\tTodolistComponent,\r\n\t\t\tTodolistItemComponent,\r\n\t\t\tNotFoundComponent\r\n\t\t],\r\n\t\tbootstrap: AppComponent,\r\n\t};\r\n}\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}