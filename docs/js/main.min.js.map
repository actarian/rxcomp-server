{"version":3,"sources":["web/client/src/main.browser.ts","../../web/client/src/app.component.ts","../../web/client/src/custom-interceptor/custom.interceptor.ts","../../web/client/src/pages/not-found.component.ts","../../web/client/src/pages/todolist-item.component.ts","../../web/client/src/vars.ts","../../web/client/src/pages/todolist.component.ts","../../web/client/src/app.module.ts","../../web/client/src/main.browser.ts"],"names":["rxcomp","rxcompHttp","rxcompRouter","rxjs","operators","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","AppComponent","_Component","apply","this","arguments","onInit","getContext","node","classList","add","Component","selector","CustomRequestInterceptor","intercept","request","next","handle","CustomResponseInterceptor","pipe","tap","event","HttpResponse","console","log","status","params","get","NotFoundComponent","template","TodolistItemComponent","_View","_proto","_this","route","combineLatest","data$","params$","takeUntil","unsubscribe$","subscribe","datas","title","itemId","onEnter","transition$","complete","gsap","set","opacity","to","duration","ease","Power3","easeOut","onComplete","onExit","View","Vars","TodolistComponent","items","error","_this2","methodUrl","HttpService","post$","query","reportProgress","first","response","data","getTodos","pushChanges","warn","host","errors$","onClick","item","completed","hosts","RouterOutletStructure","AppModule","_Module","Module","imports","CoreModule","HttpModule","useInterceptors","RouterModule","forRoot","path","redirectTo","pathMatch","component","declarations","bootstrap","Browser","http","router"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext, IFactoryMeta } from 'rxcomp';\r\n\r\nexport default class AppComponent extends Component {\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('init');\r\n\t}\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: '[app-component]',\r\n\t};\r\n}\r\n","\r\nimport { HttpEvent, HttpHandler, HttpRequest, HttpResponse, IHttpInterceptor } from 'rxcomp-http';\r\nimport { EMPTY, Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nconst cancelRequest: boolean = false;\r\n\r\nexport class CustomRequestInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\tif (cancelRequest) {\r\n\t\t\treturn EMPTY;\r\n\t\t}\r\n\t\treturn next.handle(request);\r\n\t}\r\n}\r\n\r\nexport class CustomResponseInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\treturn next.handle(request).pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tif (event instanceof HttpResponse) {\r\n\t\t\t\t\tconsole.log('CustomResponseInterceptor.status', event.status);\r\n\t\t\t\t\tconsole.log('CustomResponseInterceptor.filter', request.params.get('filter'));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class CustomRequestCloneInterceptor implements IHttpInterceptor {\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\tconst clonedRequest = request.clone({\r\n\t\t\turl: request.url,\r\n\t\t});\r\n\t\treturn next.handle(clonedRequest);\r\n\t}\r\n}\r\n","import { Component, IFactoryMeta } from 'rxcomp';\nimport { RouterOutletStructure } from 'rxcomp-router';\n\nexport default class NotFoundComponent extends Component {\n\thost!: RouterOutletStructure;\n\tonInit() {\n\t\t// console.log('NotFoundComponent.onInit');\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[not-found-component]',\n\t\ttemplate: /* html */`\n        <div class=\"page-not-found\">\n            <div class=\"title\">Not Found</div>\n        </div>\n        `,\n\t};\n}\n","import 'gsap';\nimport { IElement, IFactoryMeta } from 'rxcomp';\nimport { RouterKeyValue, transition$, View } from 'rxcomp-router';\nimport { combineLatest } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport default class TodolistItemComponent extends View {\n\tonInit() {\n\t\tconsole.log('TodolistItemComponent.onInit', this.route);\n\t\tcombineLatest(this.route.data$, this.route.params$).pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((datas: RouterKeyValue[]) => {\n\t\t\tthis.title = datas[0].title;\n\t\t\tthis.itemId = datas[1].itemId;\n\t\t\t// this.pushChanges(); // !!! not needed;\n\t\t\t// console.log('TodolistItemComponent', datas);\n\t\t});\n\t}\n\tonEnter(node: IElement) {\n\t\treturn transition$(complete => {\n\t\t\tgsap.set(node, { opacity: 0 });\n\t\t\tgsap.to(node, {\n\t\t\t\topacity: 1,\n\t\t\t\tduration: 0.6,\n\t\t\t\tease: Power3.easeOut,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tcomplete(true);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tonExit(node: IElement) {\n\t\treturn transition$(complete => {\n\t\t\tgsap.set(node, { opacity: 1 });\n\t\t\tgsap.to(node, {\n\t\t\t\topacity: 0,\n\t\t\t\tduration: 0.6,\n\t\t\t\tease: Power3.easeOut,\n\t\t\t\tonComplete: () => {\n\t\t\t\t\tcomplete(true);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[detail-component]',\n\t\ttemplate: /* html */`\n        <div class=\"page-detail\">\n            <div class=\"title\">Todolist Item {{itemId}}</div>\n        </div>\n        `,\n\t};\n}\n","import { IServerVars } from \"../../../src/rxcomp-server\";\r\n\r\nexport const Vars: IServerVars = {\r\n\tname: 'rxcomp-server',\r\n\thost: '',\r\n\tresource: '/',\r\n\tapi: '/api',\r\n\tstatic: false,\r\n\tdevelopment: false,\r\n\tproduction: true,\r\n};\r\n\r\n/*\r\nexport const STATIC = window.location.port === '40333' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'ws-events',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/Modules/Events/Client/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Modules/Events/Client/docs/api' : './api',\r\n};\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\t// console.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n*/\r\n","import { Component, errors$, IFactoryMeta } from 'rxcomp';\nimport { HttpService } from 'rxcomp-http';\nimport { RouterKeyValue, RouterOutletStructure } from 'rxcomp-router';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { IResponseData, ITodoItem } from '../todo/todo';\nimport { Vars } from '../vars';\n\nexport default class TodolistComponent extends Component {\n\thost!: RouterOutletStructure;\n\titems: ITodoItem[] = [];\n\terror: any = null;\n\tonInit() {\n\t\tconst mode: number = 1;\n\t\tconst payload = { query: `{ getTodos { id, title, completed } }` };\n\t\tconst methodUrl: string = `${Vars.host}${Vars.api}`;\n\t\tconsole.log('TodolistComponent.onInit', this);\n\t\tif (mode === 1) {\n\t\t\tHttpService.post$<IResponseData>(methodUrl, payload, {\n\t\t\t\tparams: { query: `{ getTodos { id, title, completed } }` },\n\t\t\t\treportProgress: false\n\t\t\t}).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t} else if (mode === 2) {\n\t\t\t// console.log('TodolistComponent.methodUrl', methodUrl);\n\t\t\tHttpService.post$<IResponseData>(methodUrl, payload).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t} else {\n\t\t\tHttpService.get$<IResponseData>(`${Vars.host}/data/todos.json`).pipe(\n\t\t\t\tfirst(),\n\t\t\t).subscribe((response: IResponseData) => {\n\t\t\t\tthis.items = response.data.getTodos;\n\t\t\t\tthis.pushChanges();\n\t\t\t\t// console.log('TodolistComponent.getTodos', this.items);\n\t\t\t}, console.warn);\n\t\t}\n\t\tconst route = this.host.route;\n\t\tif (route) {\n\t\t\troute.data$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t).subscribe((data: RouterKeyValue) => {\n\t\t\t\tthis.title = data.title;\n\t\t\t\t// this.pushChanges(); // !! not needed;\n\t\t\t\t// console.log('TodolistComponent', data);\n\t\t\t});\n\t\t}\n\t\t// generic errors\n\t\terrors$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$),\n\t\t).subscribe(error => {\n\t\t\tthis.error = error;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonClick(item: { title: string, completed: boolean }) {\n\t\titem.completed = !item.completed;\n\t\tthis.pushChanges();\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[todolist-component]',\n\t\thosts: { host: RouterOutletStructure },\n\t\ttemplate: /* html */`\n        <div class=\"page-todolist\">\n\t\t\t<div class=\"title\">{{title}}</div>\n\t\t\t<!-- {{items | json}} -->\n\t\t\t<ul class=\"list\">\n\t\t\t\t<li class=\"list__item\" *for=\"let item of items\" [class]=\"{ completed: item.completed }\" [style]=\"{ 'border-color': item.completed ? 'red' : 'black' }\">\n\t\t\t\t\t<div class=\"title\" [routerLink]=\"['/todolist', item.id]\" [innerHTML]=\"item.title\"></div>\n\t\t\t\t\t<div class=\"completed\" (click)=\"onClick(item)\" [innerHTML]=\"item.completed\"></div>\n\t\t\t\t\t<!-- !!! debug -->\n\t\t\t\t\t<!-- <div class=\"completed\" (click)=\"onClick(item)\">{{item.completed}}</div> -->\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div *if=\"error\">\n\t\t\t\t<span>error => {{error | json}}</span>\n\t\t\t</div>\n        </div>\n        `,\n\t};\n}\n","import { CoreModule, IModuleMeta, Module } from 'rxcomp';\nimport { HttpModule } from 'rxcomp-http';\nimport { RouterModule } from 'rxcomp-router';\nimport AppComponent from './app.component';\nimport { CustomRequestInterceptor, CustomResponseInterceptor } from './custom-interceptor/custom.interceptor';\nimport NotFoundComponent from './pages/not-found.component';\nimport TodolistItemComponent from './pages/todolist-item.component';\nimport TodolistComponent from './pages/todolist.component';\n\nexport default class AppModule extends Module {\n\n\tstatic meta: IModuleMeta = {\n\t\timports: [\n\t\t\tCoreModule,\n\t\t\tHttpModule.useInterceptors([CustomRequestInterceptor, CustomResponseInterceptor]),\n\t\t\tRouterModule.forRoot([\n\t\t\t\t{ path: '', redirectTo: '/todolist', pathMatch: 'full' },\n\t\t\t\t{ path: 'todolist', component: TodolistComponent, data: { title: 'Todolist' } },\n\t\t\t\t{ path: 'todolist/:itemId', component: TodolistItemComponent, data: { title: 'Todolist Item' } },\n\t\t\t\t{ path: '**', component: NotFoundComponent },\n\t\t\t]), // .useStrategy(LocationStrategyHash),\n\t\t],\n\t\tdeclarations: [\n\t\t\tTodolistComponent,\n\t\t\tTodolistItemComponent,\n\t\t\tNotFoundComponent\n\t\t],\n\t\tbootstrap: AppComponent,\n\t};\n\n}\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}