{"version":3,"sources":["test/js/main.browser.ts","../../test/js/http/http.service.ts","../../test/js/app.component.ts","../../test/js/app.module.ts","../../test/js/main.browser.ts"],"names":["rxcomp","operators","rxjs","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","HttpResponse","response","this","url","status","statusText","ok","redirected","data","Constructor","protoProps","staticProps","get","indexOf","HttpService","http$","method","format","_this","response_","pendingRequests$","next","getValue","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","undefined","then","json","Promise","resolve","reject","pipe","catchError","error","console","log","throwError","getError","finalize","get$","query","delete$","post$","put$","patch$","object","statusCode","statusMessage","BehaviorSubject","AppComponent","_Component","apply","arguments","_proto","onInit","items","first","subscribe","pushChanges","onClick","item","completed","Component","selector","AppModule","_Module","Module","imports","CoreModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs/js/main.min.js","sourcesContent":[null,"import { BehaviorSubject, from, Observable, throwError } from 'rxjs';\nimport { catchError, finalize } from 'rxjs/operators';\n\nexport class HttpResponse {\n\n\tdata?: any;\n\turl: string = '';\n\tstatus: number = 0;\n\tstatusText: string = '';\n\tok: boolean = false;\n\tredirected: boolean = false;\n\n\tget static() {\n\t\treturn this.url!.indexOf('.json') === this.url!.length - 5;\n\t}\n\n\tconstructor(response: Response) {\n\t\tthis.data = null;\n\t\tif (response) {\n\t\t\tthis.url = response.url;\n\t\t\tthis.status = response.status;\n\t\t\tthis.statusText = response.statusText;\n\t\t\tthis.ok = response.ok;\n\t\t\tthis.redirected = response.redirected;\n\t\t}\n\t}\n}\n\nexport default class HttpService {\n\n\tstatic pendingRequests$: BehaviorSubject<number> = new BehaviorSubject<number>(0);\n\n\tstatic http$(method: string, url: string, data?: any, format: string = 'json'): Observable<any> {\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\n\t\tlet response_: HttpResponse | null = null;\n\t\tthis.pendingRequests$.next(this.pendingRequests$.getValue() + 1);\n\t\treturn from(fetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\n\t\t}).then((response: Response) => {\n\t\t\tresponse_ = new HttpResponse(response);\n\t\t\tif (typeof (response as any)[format] === 'function') {\n\t\t\t\treturn (response as any)[format]().then((json: any) => {\n\t\t\t\t\tresponse_!.data = json;\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn Promise.resolve(response_);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Promise.reject(response_);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn Promise.reject(response_);\n\t\t\t}\n\t\t})).pipe(\n\t\t\tcatchError(error => {\n\t\t\t\tconsole.log('error', error);\n\t\t\t\treturn throwError(this.getError(error, response_));\n\t\t\t}),\n\t\t\tfinalize(() => {\n\t\t\t\tthis.pendingRequests$.next(this.pendingRequests$.getValue() - 1);\n\t\t\t})\n\t\t);\n\t}\n\n\tstatic get$(url: string, data?: any, format?: string): Observable<any> {\n\t\tconst query = this.query(data);\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\n\t}\n\n\tstatic delete$(url: string): Observable<any> {\n\t\treturn this.http$('DELETE', url);\n\t}\n\n\tstatic post$(url: string, data?: any): Observable<any> {\n\t\treturn this.http$('POST', url, data);\n\t}\n\n\tstatic put$(url: string, data?: any): Observable<any> {\n\t\treturn this.http$('PUT', url, data);\n\t}\n\n\tstatic patch$(url: string, data?: any): Observable<any> {\n\t\treturn this.http$('PATCH', url, data);\n\t}\n\n\tstatic query(data: any): string {\n\t\treturn ''; // todo\n\t}\n\n\tstatic getError(object: any, response: HttpResponse | null): any {\n\t\tlet error = typeof object === 'object' ? object : {};\n\t\tif (!error.statusCode) {\n\t\t\terror.statusCode = response ? response.status : 0;\n\t\t}\n\t\tif (!error.statusMessage) {\n\t\t\terror.statusMessage = response ? response.statusText : object;\n\t\t}\n\t\t// console.log('HttpService.getError', error, object);\n\t\treturn error;\n\t}\n\n}\n","import { Component, IFactoryMeta } from 'rxcomp';\nimport { first } from 'rxjs/operators';\nimport HttpService from './http/http.service';\n\nexport default class AppComponent extends Component {\n\n\tonInit() {\n\t\t// console.log('AppComponent.onInit', this);\n\t\tthis.items = [];\n\t\t// HttpService.get$('https://jsonplaceholder.typicode.com/users/1/todos').pipe(\n\t\tHttpService.get$('http://localhost:5000/data/todos.json').pipe(\n\t\t\tfirst(),\n\t\t).subscribe(response => {\n\t\t\tconsole.log('AppComponent.items', response);\n\t\t\tthis.items = response.data;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tonClick(item: { title: string, completed: boolean }) {\n\t\titem.completed = !item.completed;\n\t\tthis.pushChanges();\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[app-component]',\n\t};\n\n}\n","import { CoreModule, IModuleMeta, Module } from 'rxcomp';\nimport AppComponent from './app.component';\n\nexport default class AppModule extends Module {\n\n\tstatic meta: IModuleMeta = {\n\t\timports: [\n\t\t\tCoreModule,\n\t\t],\n\t\tdeclarations: [\n\t\t],\n\t\tbootstrap: AppComponent,\n\t};\n\n}\n","import { Browser } from 'rxcomp';\nimport AppModule from './app.module';\n\nBrowser.bootstrap(AppModule);\n"]}